/* Copyright (C) 2012-2013 NS Solutions Corporation. Licensed under the Apache License, Version 2.0. hifive version 1.1.8s gitCommitId 30b876bb669c2322abe9ec3b74457b7ea796eaf1 (util,controller,modelWithBinding,view,ui,api.geo,api.sqldb,api.storage) */
(function(b){function c(b,c,o){var s=null,l=Wa[b],x=bb[b];x&&(s=x(b,l,c,o));!s&&l&&(s=k.u.str.format.apply(null,[l].concat(c)));s&&(s+="(code="+b+")");c=s?Error(s):Error("FwError: code = "+b);b&&(c.code=b);o&&(c.detail=o);throw c;}function V(b,c,o){var s=null,l=Wa[b];l&&(c=[l].concat(c),s=k.u.str.format.apply(null,c));return{code:b,message:s,detail:o}}function I(c){return null==c?c:b.isArray(c)?c:[c]}function Q(b){var c=document.createElement("span");c.innerHTML='<a href="'+b+'" />';return c.firstChild.href}
function x(b){return"string"===typeof b}function ya(b){return b.isRejected?b.isRejected():"rejected"===b.state()}function za(b){return b.isResolved?b.isResolved():"resolved"===b.state()}function da(b){return!x(b)?!1:!!b.match(/^[A-Za-z_\$][\w|\$]*$/)}function ja(c){if("regexp"===b.type(c))return c;var k="",k=-1!==c.indexOf("*")?b.map(c.split("*"),function(b){return b.replace(/\W/g,"\\$&")}).join(".*"):c;return RegExp("^"+k+"$")}function ka(b,c,k){b&&(b._h5UnwrappedCall?b._h5UnwrappedCall(c,k):b[c](k))}
var Xa=void 0;if(window.h5){if(window.h5.env&&"1.1.8s"===window.h5.env.version)return;Xa=window.h5}var k={};window.h5=k;k.coexist=function(){window.h5=Xa;return k};k.env={version:"1.1.8s"};var Wa={},bb={},Ya={controllerInternal:null},Za;(function(){function t(b){switch(b){case "string":return"s";case "number":return"n";case "boolean":return"b";case "String":return"S";case "Number":return"N";case "Boolean":return"B";case "infinity":return"i";case "-infinity":return"I";case "nan":return"x";case "date":return"d";
case "regexp":return"r";case "array":return"a";case "object":return"o";case "null":return"l";case D:return"u";case "undefElem":return"_";case "objElem":return"@"}}function z(b,d){if(x(b)){var a=b;d&&(a=a.replace(/\\n/g,"\n").replace(/\\r/g,"\r"));return a=a.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}return b instanceof String?new String(z(b.toString())):b}function o(b,a){return"1"===a?b:x(b)?b.replace(/\\\\/g,"\\-").replace(/\\b/g,
"").replace(/\\f/g,"").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\-/g,"\\"):b instanceof String?new String(o(b.toString())):b}function s(b,a,d){var c=k.async.deferred();k.ajax({url:b,async:a,cache:d,dataType:"script",converters:{"text script":function(b){return b}}}).done(function(){var b=E(arguments);b.push(this.url);c.notifyWith(c,b);c.resolveWith(c,b)}).fail(function(){c.rejectWith(c,E(arguments))});return c.promise()}function l(b){x(b)||c(h,"h5.u.obj.ns()");for(var b=
b.split("."),a=b.length,d=0;d<a;d++)da(b[d])||c(h,"h5.u.obj.ns()");for(var e=window,d=0;d<a;d++){var C=b[d];void 0===e[C]&&(e[C]={});e=e[C]}return e}function G(b,d){var a=l(b),e;for(e in d)d.hasOwnProperty(e)&&(void 0!==a[e]&&c(A,[b,e]),a[e]=d[e])}function E(b){return Array.prototype.slice.call(b)}var D="undefined",h=11E3,A=11001,e=11004,i=11005,d=11006,p={},f={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;","'":"&apos;"},J=void 0!==document.createElement("script").onload,a=-1===/\r\n/.toString().indexOf("\r\n");
G("h5.u",{loadScript:function(d,a){var e=k.async.deferred,i=I(d);(!i||0===i.length)&&c(11007);for(var C=0,F=i.length;C<F;C++)d=i[C],(!x(d)||!b.trim(d))&&c(11007);null!=a&&!b.isPlainObject(a)&&c(11008,"h5.u.loadScript()");var u=a&&!1===a.async?!1:!0,D=!!(a&&!0===a.force),C=!!(a&&!0===a.parallel),f=!!(a&&!0===a.atomic),t=!D,h=u?e():null,o=u?function(b){h.reject(V(11010,[b]))}:null,F=u?function(){var b=e();setTimeout(function(){b.resolve([])},0);return b.promise()}:null,l=C?[]:null,A=[],z={};if(u){if(!f&&
J){var G=b("head"),T=function(b){var g=e(),n=document.createElement("script");n.onload=function(){n.onload=null;p[b]=b;g.resolve()};n.onerror=function(){n.onerror=null;g.reject(b)};n.type="text/javascript";n.src=t?b:b+(-1<b.indexOf("?")?"&_":"?_")+ +new Date;G[0].appendChild(n);return g.promise()};if(C)l.push(F()),b.each(i,function(){var b=Q(this);if(!D&&b in p)return!0;l.push(T(b))}),k.async.when(l).then(function(){h.resolve()},o);else{var O=e().resolve().pipe(F);b.each(i,function(){var b=Q(this);
O=O.pipe(function(){if(D||!(b in p))return T(b)},o)});O.pipe(function(){h.resolve()},o)}}else if(C){var N=[];l.push(F());N.push(null);b.each(i,function(){var b=Q(this);if(!D&&(b in p||b in z))return!0;l.push(s(b,u,t));f?z[b]=b:N.push(null)});C=i=null;f?(i=function(){b.each(E(arguments),function(a,g){b.globalEval(g[0])});b.extend(p,z);h.resolve()},C=b.noop):(i=function(){h.resolve()},C=function(){for(var a=E(arguments),g=0;g<N.length;g++)if(a[g]){var n=a[g][3];N[g]!==n&&(b.globalEval(a[g][0]),N.splice(g,
1,n))}});k.async.when(l).then(i,o,C)}else O=e().resolve().pipe(F),b.each(i,function(){var a=Q(this);O=O.pipe(function(){var g=e();!D&&(a in p||a in z)?g.resolve():s(a,u,t).then(function(n){f?(A.push(n),z[a]=a):(b.globalEval(n),p[a]=a);g.resolve()},function(){g.reject(this.url)});return g.promise()},o)}),O.pipe(function(){f&&(b.each(A,function(a,g){b.globalEval(g)}),b.extend(p,z));h.resolve()},o);return h.promise()}b.each(i,function(){var a=Q(this);if(!D&&(a in p||a in z))return!0;s(a,u,t).then(function(g){f?
(A.push(g),z[a]=a):(b.globalEval(g),p[a]=a)},function(){c(11010,[a])})});f&&(b.each(A,function(a,g){b.globalEval(g)}),b.extend(p,z))},createInterceptor:function(a,d){return function(c){var e={},C=a?a.call(this,c,e):c.proceed();c.result=C;if(!d)return C;if(C&&b.isFunction(C.promise)){var F=this;ka(C,"always",function(){d.call(F,c,e)});return C}d.call(this,c,e);return C}}});G("h5.u.str",{startsWith:function(b,a){return 0===b.lastIndexOf(a,0)},endsWith:function(b,a){var d=b.length-a.length;return 0<=
d&&b.lastIndexOf(a)===d},format:function(b,a){if(null==b)return"";var d=arguments;return b.replace(/\{(\d+)\}/g,function(b,a){var c=d[parseInt(a,10)+1];return typeof c===D?D:c})},escapeHtml:function(a){return"string"!==b.type(a)?a:a.replace(/[&"'<>]/g,function(b){return f[b]})}});G("h5.u.obj",{expose:G,ns:l,serialize:function(d){function e(b){for(var a=0,d=C.length;a<d;a++)if(b===C[a])return!0;return!1}function p(b){for(var a=0,d=C.length;a<d;a++)b===C[a]&&C.splice(a,1)}function f(d){var u=d,j=b.type(d);
"object"===typeof d&&(d instanceof String?j="String":d instanceof Number?j="Number":d instanceof Boolean&&(j="Boolean"));switch(j){case "String":case "string":u=t(j)+z(u);break;case "Boolean":u=u.valueOf();case "boolean":u=t(j)+(u?1:0);break;case "Number":u=u.valueOf();if(b.isNaN&&b.isNaN(d)||b.isNumeric&&!b.isNumeric(d))u=Infinity===d.valueOf()?t("infinity"):-Infinity===d.valueOf()?t("-infinity"):t("nan");u=t(j)+u;break;case "number":u=b.isNaN&&b.isNaN(d)||b.isNumeric&&!b.isNumeric(d)?Infinity===
d?t("infinity"):-Infinity===d?t("-infinity"):t("nan"):t(j)+u;break;case "regexp":u=t(j)+z(u.toString(),a);break;case "date":u=t(j)+ +u;break;case "array":e(d)&&c(ERR_CODE_REFERENCE_CYCLE);C.push(d);for(var k=[],u=t(j)+"[",j=0,h=d.length;j<h;j++){k[j.toString()]=!0;var o;o=d.hasOwnProperty(j)?"function"===b.type(d[j])?t(D):f(d[j]).replace(/\\/g,"\\\\").replace(/"/g,'\\"'):t("undefElem");u+='"'+o+'"';j!==d.length-1&&(u+=",")}var j="",l;for(l in d)k[l]||"function"!==b.type(d[l])&&(j+='"'+z(l)+'":"'+
f(d[l]).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'",');j&&(u+=(d.length?",":"")+'"'+t("objElem")+"{"+j.replace(/\\/g,"\\\\").replace(/"/g,'\\"'),u=u.replace(/,$/,""),u+='}"');u+="]";p(d);break;case "object":e(d)&&c(i);C.push(d);u=t(j)+"{";for(l in d)d.hasOwnProperty(l)&&"function"!==b.type(d[l])&&(u+='"'+l+'":"'+f(d[l]).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'",');u=u.replace(/,$/,"");u+="}";p(d);break;case "null":case D:u=t(j)}return u}b.isFunction(d)&&c(11002);var C=[];return"2|"+f(d)},deserialize:function(a){function i(a){function j(b){switch(b){case "s":return"string";
case "n":return"number";case "b":return"boolean";case "S":return"String";case "N":return"Number";case "B":return"Boolean";case "i":return"infinity";case "I":return"-infinity";case "x":return"nan";case "d":return"date";case "r":return"regexp";case "a":return"array";case "o":return"object";case "l":return"null";case "u":return D;case "_":return"undefElem";case "@":return"objElem"}}a.match(/^(.)(.*)/);a=RegExp.$1;f=RegExp.$2?RegExp.$2:"";if(void 0!==a&&""!==a)switch(j(a)){case "String":f=new String(o(f,
p));break;case "string":break;case "Boolean":"0"===f||"1"===f?f=new Boolean("1"===f):c(d);break;case "boolean":"0"===f||"1"===f?f="1"===f:c(d);break;case "nan":""!==f&&c(d);f=NaN;break;case "infinity":""!==f&&c(d);f=Infinity;break;case "-infinity":""!==f&&c(d);f=-Infinity;break;case "Number":"infinity"===j(f)?f=new Number(Infinity):"-infinity"===j(f)?f=new Number(-Infinity):"nan"===j(f)?f=new Number(NaN):(f=new Number(f),isNaN(f.valueOf())&&c(d));break;case "number":f=(new Number(f)).valueOf();isNaN(f)&&
c(d);break;case "array":var u;try{u=b.parseJSON(f)}catch(k){c(d)}b.isArray(u)||c(d);for(var h=0;h<u.length;h++)switch(j(u[h].substring(0,1))){case "undefElem":delete u[h];break;case "objElem":for(var l=i(t("object")+u[h].substring(1)),a=[],h=0,A=u.length-1;h<A;h++)a[h]=u[h];u=a;for(var s in l)u[s]=l[s];break;default:u[h]=i(u[h])}f=u;break;case "object":try{u=b.parseJSON(f)}catch(J){c(d)}b.isPlainObject(u)||c(d);for(s in u)u[s]=i(u[s]);f=u;break;case "date":f=new Date(parseInt(f,10));break;case "regexp":try{h=
f.match(/^\/(.*)\/(.*)$/),l=o(h[1],p),f=RegExp(l,h[2])}catch(z){c(d)}break;case "null":""!==f&&c(d);f=null;break;case D:""!==f&&c(d);f=void 0;break;default:c(e)}return o(f,p)}x(a)||c(11009);a.match(/^(.)\|(.*)/);var p=RegExp.$1;"1"!==p&&"2"!==p&&c(11003,[p,"2"]);var f=RegExp.$2;return i(f)},isJQueryObject:function(a){return!a||!a.jquery?!1:a.jquery===b().jquery},argsToArray:E,getByPath:function(b){x(b)||c(h,"h5.u.obj.getByPath()");b=b.split(".");"window"===b[0]&&b.unshift();for(var a=window,d=0,e=
b.length;d<e&&!(a=a[b[d]],null==a);d++);return a}})})();(function(){var t,z,o,s,l,G,E;function D(b){return b.match(/^error$/i)?t:b.match(/^warn$/i)?z:b.match(/^info$/i)?o:b.match(/^debug$/i)?s:b.match(/^trace$/i)?l:b.match(/^all$/i)?G:b.match(/^none$/i)?E:null}function h(a,d){var c={};if(b.isArray(a)){var e=a.slice(0,3).join(" <- ");0<a.slice(3).length&&(e+=" ...");c.recent=e;c.all=d.join("\n")}else c.recent=a,c.all=d;return c}function A(b){var a="";b.name?a=b.name:(/^\s*function\s*([\w\-\$]+)?\s*\(/i.test(b.toString()),
a=RegExp.$1);return a}function e(a){for(var a=k.u.obj.argsToArray(a),d=[],c=0,e=a.length;c<e;c++)d.push(b.type(a[c]));return d.join(", ")}function i(){}function d(d){(!x(d)||0===b.trim(d).length)&&c(a);this.category=b.trim(d)}var p=10002,f=10003,J=10004,a=10005,j=10007,v=10008,K=10010;t=50;z=40;o=30;s=20;l=10;G=0;E=-1;var H=null;i.prototype={init:function(){},log:function(b){window.console&&(x(b.args[0])?this._logMsg(b):this._logObj(b))},_logMsg:function(b){var a=b.args,d=null,d=1===a.length?a[0]:
k.u.str.format.apply(k.u.str,a),a=this._getLogPrefix(b)+d;b.logger.enableStackTrace&&(a+="  ["+b.stackTrace.recent+"]");b.logger.enableStackTrace&&console.groupCollapsed?console.groupCollapsed(a):this._consoleOut(b.level,a);b.logger.enableStackTrace&&this._consoleOut(b.level,b.stackTrace.all);b.logger.enableStackTrace&&console.groupEnd&&console.groupEnd()},_consoleOut:function(b,a){var d=!1;b==t&&console.error?(console.error(a),d=!0):b==z&&console.warn?(console.warn(a),d=!0):b==o&&console.info?(console.info(a),
d=!0):b==s&&console.debug&&(console.debug(a),d=!0);!d&&console.log&&console.log(a)},_getLogPrefix:function(b){return"["+b.levelString+"]"+b.date.getHours()+":"+b.date.getMinutes()+":"+b.date.getSeconds()+","+b.date.getMilliseconds()+": "},_logObj:function(b){var a=b.args,d=this._getLogPrefix(b);a.unshift(d);b.level==t&&console.error?this._output(console.error,a):b.level==z&&console.warn?this._output(console.warn,a):b.level==o&&console.info?this._output(console.info,a):b.level==s&&console.debug?this._output(console.debug,
a):this._output(console.log,a)},_output:function(b,a){b.apply?b.apply(console,a):b(a)}};d.prototype={enableStackTrace:!1,maxStackSize:10,error:function(b){this._log(t,arguments,this.error)},warn:function(b){this._log(z,arguments,this.warn)},info:function(b){this._log(o,arguments,this.info)},debug:function(b){this._log(s,arguments,this.debug)},trace:function(b){this._log(l,arguments,this.trace)},_traceFunctionName:function(a){var d=Error(),c=d.stack||d.stacktrace,d=[],f={};if(c)var d=c.replace(/\r\n/,
"\n").replace(/at\b|@|Error\b|\t|\[arguments not available\]/ig,"").replace(/(http|https|file):.+[0-9]/g,"").replace(/ +/g," ").split("\n"),i=null,d=b.map(d,function(a){return i=0===a.length?null:""===b.trim(a)?"{anonymous}":b.trim(a)}),f=h(d.slice(3,d.length),d.slice(0,this.maxStackSize));else if(a=a.caller,c=0,a)for(;;){var j=e(a.arguments),p=A(a);p?d.push("{"+p+"}("+j+")"):a.caller?d.push("{anonymous}("+j+")"):d.push("{root}("+j+")");if(!a.caller||c>=this.maxStackSize){f=h(d,d);break}a=a.caller;
c++}else h("{unable to trace}","{unable to trace}");return f},_log:function(b,a,d){var a={level:b,args:k.u.obj.argsToArray(a),stackTrace:this.enableStackTrace?this._traceFunctionName(d):""},c=H.out,e=H.defaultOut,d=null;if(c)for(var c=I(c),f=0,i=c.length;f<i;f++){var j=c[f];if(j.compiledCategory.test(this.category)){d=j;break}}d||(d=e);f=d.compiledLevel;d=d.compiledTargets;if(!(b<f||0>f))if(a.logger=this,a.date=new Date,a.levelString=this._levelToString(b),d&&0!==d.length){f=0;for(i=d.length;f<i;f++)d[f].log(a)}},
_levelToString:function(b){if(b===t)return"ERROR";if(b===z)return"WARN";if(b===o)return"INFO";if(b===s)return"DEBUG";if(b===l)return"TRACE"}};k.u.obj.expose("h5.log",{createLogger:function(b){return new d(b)},configure:function(){function a(i,h,t){var k=null==t;if(!k){var l=h.category;(!x(l)||0===b.trim(l).length)&&c(K);l=b.trim(l);-1!==b.inArray(l,e)&&c(p,h.category);h.compiledCategory=ja(l);e.push(l)}l=null==h.level?D(k?d.level:t.level):x(h.level)?D(b.trim(h.level)):h.level;"number"!==typeof l&&
c(f,h.level);h.compiledLevel=l;var l=[],o=h.targets;if(!k||null!=o){var s=[];null==o||b.isArray(o)||x(o)&&b.trim(o).length||c(v);for(var o=I(o),A=0,g=o.length;A<g;A++){null==o[A]||x(o[A])&&b.trim(o[A]).length||c(v);var n=o[A];if(n){-1!==b.inArray(n,s)&&c(j,n);var r=i[n];r||c(J,n);s.push(n);l.push(r.compiledTarget)}}if(!k&&(i=t.targets,null!=i)){i=I(i);A=0;for(g=i.length;A<g;A++)n=i[A],-1===b.inArray(n,s)&&(l.push(t.compiledTargets[A]),s.push(n))}}h.compiledTargets=l}var d={level:"NONE",targets:null},
e=[];H=b.extend(!0,{},k.settings.log?k.settings.log:{defaultOut:d});var h=H.target;h||(h={},H.target=h);(function(a){b.isPlainObject(a)||c(10009);for(var d in a){var e=a[d];b.type(e.type)!=="object"&&e.type!=="console"&&c(1E4);var f=null,f=e.type==="console"?new i:b.extend(true,{},e.type);f.init&&f.init(e);e.compiledTarget=f}a.console={type:"console",compiledTarget:new i}})(h);var t=H.defaultOut;t||(t=d,H.defaultOut=t);a(h,t);var l=H.out;if(l)for(var l=I(l),o=0,s=l.length;o<s;o++)a(h,l[o],t)}})})();
(function(){function c(t){k.settings.aspects=b.map(I(t),function(b){b.target&&(b.compiledTarget=ja(b.target));b.pointCut&&(b.compiledPointCut=ja(b.pointCut));return b})}k.u.obj.ns("h5.settings");k.settings={commonFailHandler:null,aspects:null,log:null,listenerElementType:1,dynamicLoading:{retryCount:3,retryInterval:500},ajax:{retryCount:0,retryInterval:500,retryFilter:function(b){b=b.status;if("POST"===this.type||!(0===b||12029===b))return!1}}};var z=k.u.createInterceptor(function(b,c){this.log.info("{0}.{1}が開始されました。",
this.__name,b.funcName);this.log.info(b.args);c.start=new Date;return b.proceed()},function(b,c){var l=(new Date).getTime()-c.start.getTime();this.log.info("{0}.{1}が終了しました。 Time={2}ms",this.__name,b.funcName,l)});k.u.obj.expose("h5.core.interceptor",{lapInterceptor:z,logInterceptor:z,errorInterceptor:function(c){var t=null;try{t=c.proceed()}catch(l){k.settings.commonFailHandler&&b.isFunction(k.settings.commonFailHandler)&&k.settings.commonFailHandler.call(null,l)}return t}});b(document).trigger("h5preinit");
k.settings.aspects&&c(k.settings.aspects);k.log.configure()})();(function(){k.u.obj.expose("h5.env",{ua:function(c){var k=!!c.match(/iPhone/i),o=!!c.match(/iPad/i),s=k||o,l=!!c.match(/android/i),x=!!c.match(/Windows Phone/i),E=!!c.match(/MSIE/),D=!!c.match(/Firefox/i),h=!!c.match(/Chrome/i)||!!c.match(/CrMo/)||!!c.match(/CriOS/),A=!l&&!!c.match(/Safari/i)&&!h,e=!!c.match(/Webkit/i),i=!!c.match(/Opera/i),d=l&&!!c.match(/Safari/i)&&!h,p=!(!k&&!x&&!(d&&c.match(/Mobile/)&&!c.match(/SC-01C/)||l&&h&&c.match(/Mobile/)||
c.match(/Fennec/i)||c.match(/Opera Mobi/i))),f=!(!o&&!(d&&!c.match(/Mobile/)||l&&h&&!c.match(/Mobile/)||c.match(/SC-01C/)||c.match(/Fennec/i)||c.match(/Opera Tablet/i))),J=!p&&!f,a=null,j=null,v=function(a,d){return b.trim(c.substring(c.indexOf(a)+a.length,c.indexOf(d))).split("_")},K=function(a,d){var e=b.trim(c.match(!1===d?RegExp(a+"[^;)]*"):RegExp(a+"[^;)]*","i"))).split(" ");return 1===e.length?"":e[e.length-1]},H=function(a,d){var e=b.trim(c.match(!1===d?RegExp(a+"[^;) ]*"):RegExp(a+"[^;) ]*",
"i"))).split("/");return 1===e.length?"":e[e.length-1]};if(k)j=v("iPhone OS","like"),a=parseInt(j[0]),j=j.join(".");else if(o)j=v("CPU OS","like"),a=parseInt(j[0]),j=j.join(".");else if(!l||!D)l?(j=K("Android"),a=parseInt(j.split(".")[0])):x&&((j=K("Windows Phone OS"))||(j=K("Windows Phone")),a=parseInt(j.split(".")[0]));E&&i&&(E=!1);var C=v=null;if(s||l&&d)v=a,C=j;else{var F=null;E?F=K("MSIE",!1):h?(F=H("Chrome",!1))||(F=H("CrMo",!1)):A?F=H("Version"):D?F=H("Firefox"):i&&((F=H("Version"))||(F=H("Opera")),
F||(F=K("Opera")));F&&(v=parseInt(F.split(".")[0]),C=F)}return{osVersion:a,osVersionFull:j,browserVersion:v,browserVersionFull:C,isiPhone:k,isiPad:o,isiOS:s,isAndroid:l,isWindowsPhone:x,isIE:E,isFirefox:D,isChrome:h,isSafari:A,isOpera:i,isAndroidDefaultBrowser:d,isSmartPhone:p,isTablet:f,isDesktop:J,isWebkit:e}}(navigator.userAgent)})})();(function(){function t(c){function h(){k=!0;e=this;i=l(arguments);if(ya(c)||za(c))return c;var p=l(arguments);if(0<d.length)for(var f=0,h=d.length;f<h;f++){var a=
p;a!==arguments&&(a=I(a));b.isFunction(d[f])&&d[f].apply(this,a)}return c}var k=!1,e=null,i=null,d=[];c.progress=function(){for(var p=l(arguments),f=0,h=p.length;f<h;f++){var a=p[f];if(b.isArray(a))c.progress.apply(this,a);else if(b.isFunction(a))if(k){var j=i;j!==i&&(j=I(j));a.apply(e,j)}else d.push(a)}return this};c.notify=h;c.notifyWith=function(b,d){return!d?h.apply(b):h.apply(b,d)}}function z(c){if(!c)return!1;for(var c=I(c),h=0,k=c.length;h<k;h++)if(b.isFunction(c[h]))return!0;return!1}function o(c,
h){function A(b){h?h[b]&&(c[b]=h[b]):(f[b]=c[b],c[b]=function(){return function(){if(!d){var a=l(arguments);if("then"===b||"pipe"===b)a=a[1];z(a)&&(d=!0)}return c._h5UnwrappedCall.call(this,b,l(arguments))}}(b),J[b]=c[b])}function e(b){return function(){var a=k.settings.commonFailHandler;!d&&a&&!p&&(c.fail.call(this,a),p=!0);return b.apply(this,arguments)}}var i=!!c.progress;!i&&!E(c)?t(c):h&&(c.progress=h.progress);var d=!1,p=!1,f={},J={};c._h5UnwrappedCall=h?h._h5UnwrappedCall:function(a,d){d=I(d);
b.extend(c,f);var e=c[a].apply(this,d);b.extend(c,J);return e};for(var a=0,j=s.length;a<j;a++){var v=s[a];c[v]&&A(v)}if(c.pipe&&!h){var K=c.pipe;c.pipe=function(){var a=o(K.apply(this,arguments));if(i||!b.isFunction(arguments[2]))return a;var d=arguments[2],e=x();a.progress=function(b){e.progress(b)};c.progress(function(){var a=d.apply(this,arguments);!a||!b.isFunction(a.promise)?e.notify.call(this,a):a.progress(function(){e.notify.apply(this,arguments)})});return a};J.pipe=c.pipe}if(c.then&&!h){var H=
c.then;c.then=function(){var b=arguments,a=H.apply(this,b);if(a!==this)return o(a);!i&&z(b[2])&&c.progress.call(c,b[2]);return a};J.then=c.then}c.reject&&(c.reject=h&&h.reject?h.reject:e(c.reject));c.rejectWith&&(c.rejectWith=h&&h.rejectWith?h.rejectWith:e(c.rejectWith));if(c.promise)if(h&&h.promise)c.promise=h.promise;else{var C=c.promise;c.promise=function(){return o(C.apply(this,arguments),c)}}return c}var s=["fail","always","pipe","then"],l=k.u.obj.argsToArray,x=function(){var c=b.Deferred();
return o(c)},E=function(b){return!!b&&b.done&&b.fail&&!b.resolve&&!b.reject};k.u.obj.expose("h5.async",{deferred:x,when:function(){var c=l(arguments);1===c.length&&b.isArray(c[0])&&(c=c[0]);var h=c.length,o=k.async.deferred(),e=o.promise(),i=b.when.apply(b,c).done(function(){o.resolveWith(this&&this.promise&&this.promise()===i?o:this,l(arguments))}).fail(function(){o.rejectWith(this,l(arguments))});if(i.progress)i.progress(function(){o.notifyWith(this===i?e:this,l(arguments))});else{for(var d=[],
p=0;p<h;p++)d[p]=void 0;for(var f=function(b){return function(c){d[b]=1<arguments.length?l(arguments):c;o.notifyWith(e,d)}},p=0;p<h;p++){var t=c[p];t&&b.isFunction(t.promise)&&t.progress&&(1<h?t.progress(f(p)):t.progress(function(){o.notifyWith(e,l(arguments))}))}}return e},isPromise:E,loop:function(k,h,l){b.isArray(k)||c(5E3);var e=x(),i="number"===b.type(l)?l:20,d=!1,p=0,f=k.length,o,a=null,j=function(){if(p===f)e.resolve(k);else if(d)e.reject(k);else{var b=h.call(k,p,k[p],a);p++;E(b)?b.done(function(){o()}).fail(function(){d=
!0;o()}):o()}},t=function(){setTimeout(function(){var b=p-1;0<p&&e.notify({data:k,index:b,value:k[b]});j()},0)},s=!1;o=function(){s||(0===p%i?t():j())};var z=!1,a={resume:function(){!z&&s&&(s=!1,o())},pause:function(){s=!0},stop:function(){z=!0;e.resolve(k)}};t();return e.promise()}})})();(function(){function c(b,k){for(var h=0,o=l.length;h<o;h++){var e=l[h];b[e]&&(k[G[e]](b[e]),b[e]=void 0)}}function z(c,k,h){for(var l in k)if(k.hasOwnProperty(l)&&(h||!b.isFunction(k[l]))&&-1===b.inArray(l,s))c[l]=
k[l]}function o(b,c){z(this,b,!0);c.promise(this);var k=this.always;this.always=function(){k.apply(this,arguments);return this}}var s=["error","success","complete"],l=["error","success","complete"],G={success:"done",error:"fail",complete:"always"};k.u.obj.expose("h5",{ajax:function(){function l(b,c,f){z(i,f);e.resolveWith(this,arguments)}function s(c,k,f){if(0===h.retryCount||!1===h.retryFilter.apply(this,arguments))z(i,c),e.rejectWith(this,arguments);else if(h.retryCount--,this.async){var o=this;
setTimeout(function(){b.ajax(o).done(l).fail(s)},h.retryInterval)}else b.ajax(this).done(l).fail(s)}var h={},A=arguments;x(A[0])?(b.extend(h,A[1]),h.url=A[0]):b.extend(h,A[0]);var h=b.extend({},k.settings.ajax,h),e=k.async.deferred();c(h,e);var A=b.ajax(h),i=new o(A,e);A.done(l).fail(s);return i}})})();(function(){function t(b,a,g,m,c){this.controller=b;this.event=a;this.evArg=g;this.selector=m;this.selectorType=c}function z(b){return!this.__controllerContext.executeListeners?void 0:b.proceed()}function o(b,
a,g){var m=s(b.__name,a);g&&m.push(z);return l(b[a],a,m)}function s(a,g){var m=[],c=k.settings.aspects;if(!c||0===c.length)return m;for(var c=I(c),d=c.length-1;-1<d;d--){var n=c[d];if(!n.target||n.compiledTarget.test(a)){var e=n.interceptors;if(!n.pointCut||n.compiledPointCut.test(g))if(b.isArray(e))for(n=e.length-1;-1<n;n--)m=m.concat(e[n]);else m.push(e)}}return m}function l(b,a,g){for(var m=function(b,a,g){return function(){var U=this;return g.call(U,{target:U,func:b,funcName:a,args:arguments,
proceed:function(){return b.apply(U,this.args)}})}},c=0,d=g.length;c<d;c++)b=m(b,a,g[c]);return b}function G(b){return!!b.match(/^\{.*\}$/)}function E(b){return!!b.match(/^\[.*\]$/)}function D(a){return b.trim(a.substring(1,a.length-1))}function h(a){return b.trim(a.substring(1,a.length-1))}function A(b){for(var a=["window","document","navigator"],g=0,m=a.length;g<m;g++){var c=a[g];if(b===c||Na(b,c+"."))return Oa(b)}return b}function e(a){var g=function(a,c){for(var m in a)if(0<=b.inArray(a,c)||qa(m,
ra)&&g(a[m],c.concat([a])))return!0;return!1};return g(a,[])}function i(a){var g=function(a,c){for(var m in a)if(0<=b.inArray(a,c)||qa(m,sa)&&g(a[m],c.concat([a])))return!0;return!1};return g(a,[])}function d(a,g){var c=a[g];return qa(g,ra)&&"rootController"!==g&&"parentController"!==g&&!b.isFunction(c)&&c&&!c.__controllerContext.isRoot}function p(a,g,c){var m=[],n=[],e=function(a){n.push(a);for(var U in a)if(d(a,U)){var q=a[U],r=c?q.__controllerContext[g]:q[g];r&&m.push(r);-1===b.inArray(q,n)&&e(q)}};
e(a);return m}function f(b){var a=function(b){var g=b.__meta,c={};if(g)for(var m in g)!1===g[m].useHandlers&&(c[m]=1);for(m in b)g=b[m],d(b,m)&&(a(g),c[m]||J(g))};a(b)}function J(a){var g=a.__controllerContext.bindMap,m;for(m in g)for(var c in g[m]){var d=a,n=m,e=c,q=d.__controllerContext.bindMap[n][e],r=e,f=E(e);f&&(r=h(e));var i=null;switch(r){case "mousewheel":i=Aa(d,n,r,q);break;case ea:case Da:case ta:i=ba(d,n,e,q);break;default:i=P(d,n,r,q)}if(b.isArray(i)){d=0;for(n=i.length;d<n;d++)j(i[d],
f)}else j(i,f)}}function a(a){var g=a.controller.rootElement,m=a.selector,c=a.eventName,d=a.handler,n=E(c),c=n?h(c):c;if(G(m)){var e=D(m),m=!1;e===ua?m=!0:g=A(e);m||n||!x(g)?(a.evSelectorType=Ea.SELECTOR_TYPE_OBJECT,b(g).bind(c,d)):(a.evSelectorType=Ea.SELECTOR_TYPE_GLOBAL,b(document).delegate(g,c,d));a.evSelector=g}else a.evSelectorType=Ea.SELECTOR_TYPE_LOCAL,a.evSelector=m,n?b(m,g).bind(c,d):b(g).delegate(m,c,d)}function j(g,m){m&&(g.eventName="["+g.eventName+"]");var c=g.handler;g.handler=function(){var a=
k.settings.listenerElementType===1?b(arguments[0].currentTarget):arguments[0].currentTarget;c.call(g.controller,T(g,arguments),a)};pa(g.controller,g.selector,g.eventName,g.handler);a(g)}function v(b){var a=function(b){var g=b.__meta,m={};if(g)for(var c in g)!1===g[c].useHandlers&&(m[c]=1);for(c in b)g=b[c],d(b,c)&&(a(g),m[c]||K(g))};a(b)}function K(a){var g=a.rootElement,a=a.__controllerContext.unbindMap,c;for(c in a)for(var m in a[c]){var d=a[c][m],n=E(m),e=n?h(m):m;if(G(c)){var q=D(c),r=!1;q===
ua?(q=g,r=!0):q=A(q);r||n||!x(q)?b(q).unbind(e,d):b(document).undelegate(q,e,d)}else n?b(c,g).unbind(e,d):b(g).undelegate(c,e,d)}}function H(a,g){a.__controllerContext.executeListeners=g;var c=[],m=function(a){c.push(a);for(var U in a)if(d(a,U)){var n=a[U];n.__controllerContext.executeListeners=g;-1===b.inArray(n,c)&&m(n)}};m(a)}function C(a){var g=[],c=function(a,m,U){a.rootController=m;a.parentController=U;g.push(a);for(var n in a)d(a,n)&&(U=a[n],-1===b.inArray(U,g)&&c(U,m,a))};c(a,a,null)}function F(a,
g){var c=g?"__init":"__ready",m=Y();setTimeout(function(){m.resolve()},0);var n=m.promise(),e=function(m){var q=!0,r;for(r in m)d(m,r)&&(q=!1,e(m[r]));var f=function(){var d=null,n=m.__name;if(m[c])try{d=m[c]({args:m.__controllerContext.args})}catch(e){throw a.rootController&&a.rootController.dispose(arguments),e;}var q=g?M(m):R(m);d&&b.isFunction(d.promise)?d.done(function(){q()}).fail(function(){var b=V($,n,B(arguments));a.rootController&&a.rootController.dispose(b)}):q()};r=g?u(m):p(m,"readyPromise");
g&&q&&r.push(n);k.async.when(r).done(function(){f()}).fail(Z)};e(a)}function u(b){var a=p(b,"initPromise");a.push(b.preinitPromise);return a}function M(b){return function(){if(!la(b)){b.isInit=!0;var a=b.__controllerContext.initDfd;delete b.__controllerContext.templatePromise;delete b.__controllerContext.preinitDfd;delete b.__controllerContext.initDfd;a.resolveWith(b);b.__controllerContext&&b.__controllerContext.isRoot&&g(b)}}}function R(a){return function(){if(!la(a)){a.isReady=!0;var g=a.__controllerContext.readyDfd;
delete a.__controllerContext.readyDfd;g.resolveWith(a);a.__controllerContext&&a.__controllerContext.isRoot&&a.rootElement&&a.isInit&&a.isReady&&b(a.rootElement).trigger("h5controllerready",a)}}}function W(a,g,m){if(!x(a))return b(a);var d=b.trim(a);G(d)?(a=D(d),m&&(Na(a,"window")||Na(a,"navigator"))&&c(ka),m=b(A(a))):m=b(g).find(a);return m}function pa(b,a,g,m){b.__controllerContext.unbindMap[a]||(b.__controllerContext.unbindMap[a]={});b.__controllerContext.unbindMap[a][g]=m}function P(b,a,g,m){return{controller:b,
selector:a,eventName:g,handler:m}}function Aa(b,a,g,m){return{controller:b,selector:a,eventName:typeof document.onmousewheel===$a?"DOMMouseScroll":g,handler:function(a){var g=a.event;null==g.wheelDelta&&g.originalEvent&&null!=g.originalEvent.wheelDelta&&(g.wheelDelta=g.originalEvent.wheelDelta);null==g.wheelDelta&&g.originalEvent&&null!=g.originalEvent.detail&&(g.wheelDelta=40*-g.originalEvent.detail);m.call(b,a)}}}function ba(a,g,m,c){var d=typeof document.ontouchstart!==$a;if(m!==ea)return d?P(a,
g,m,c):P(a,g,m,function(a){var g=a.event,m=b(g.currentTarget).offset()||{left:0,top:0};g.offsetX=g.pageX-m.left;g.offsetY=g.pageY-m.top;c.apply(this,arguments)});var n=function(b,a){for(var g in b)b.hasOwnProperty(g)&&!a[g]&&"target"!==g&&"currentTarget"!==g&&"originalEvent"!==g&&"liveFired"!==g&&(a[g]=b[g]);a.h5DelegatingEvent=b},e=d?"touchstart":"mousedown",q=d?"touchmove":"mousemove",r=d?"touchend":"mouseup",f=b(document);return function(){var i=null,aa=!1,ia=function(g,m,c){return function(e){var j;
a:{switch(g){case "touchstart":case "mousedown":j=ea;break a;case "touchmove":case "mousemove":j=Da;break a;case "touchend":case "mouseup":j=ta;break a}j=void 0}var $=j===ea;if(!$||!aa){d&&Ba(e.event,g);var Z=new b.Event(j);n(e.event,Z);var k=e.event.target;m&&(k=m);c&&c(Z);var w=e.event.originalEvent||e.event;$&&-1===b.inArray(w,ha)&&(ha=[],ma=[]);var h=b.inArray(w,ha);-1===h&&(h=ha.push(w)-1,ma[h]=!1);if(!ma[h]&&(!d||aa||$))ma[h]=!0,b(k).trigger(Z,e.evArg),aa=!0;if(e.event.currentTarget===document&&
(j===ta&&(ha=[],ma=[]),-1!==b.inArray(w,ha)))ha.splice(h,1),ma.splice(h,1);if($&&aa){Z.h5DelegatingEvent.preventDefault();j=Z.target;var p=Z.clientX,l=Z.clientY,Y=ia(q,j,function(b){var a=b.clientX,g=b.clientY;b.dx=a-p;b.dy=g-l;p=a;l=g}),cb=ia(r,j),B=function(b){e.event=b;e.evArg=S(arguments);Y(e)},y=function(b){e.event=b;e.evArg=S(arguments);cb(e)},o=d?b(j):f;i=function(){ha=[];ma=[];o.unbind(q,B);o.unbind(r,y);if(!d&&a.rootElement!==document){b(a.rootElement).unbind(q,B);b(a.rootElement).unbind(r,
y)}};o.bind(q,B);o.bind(r,y);!d&&a.rootElement!==document&&(b(a.rootElement).bind(q,B),b(a.rootElement).bind(r,y))}else j===ta&&(i(),aa=!1)}}},j=[P(a,g,m,c)];j.push({controller:a,selector:g,eventName:e,handler:ia(e)});return j}()}function Ba(a,g){var m=a.originalEvent;if(m){var c="touchend"===g||"touchcancel"===g?m.changedTouches[0]:m.touches[0],d=c.pageX,n=c.pageY;a.pageX=m.pageX=d;a.pageY=m.pageY=n;a.screenX=m.screenX=c.screenX;a.screenY=m.screenY=c.screenY;a.clientX=m.clientX=c.clientX;a.clientY=
m.clientY=c.clientY;c=a.target;if(c.ownerSVGElement)c=c.farthestViewportElement;else if(c===window||c===document)c=document.body;if(c=b(c).offset())n-=c.top,a.offsetX=m.offsetX=d-c.left,a.offsetY=m.offsetY=n}}function S(b){return 3>b.length?b[1]:B(b).slice(1)}function T(a,g){var m=null,c=null;g&&(m=g[0],c=S(g));var d=m;if(d&&null==d.offsetX&&null==d.offsetY&&d.pageX&&d.pageY){var n=d.target;if(n.ownerSVGElement)n=n.farthestViewportElement;else if(n===window||n===document)n=document.body;if(n=b(n).offset())d.offsetX=
d.pageX-n.left,d.offsetY=d.pageY-n.top}return new t(a.controller,m,c,a.evSelector,a.evSelectorType)}function O(b){for(var a in b){var g=b[a];d(b,a)&&(g.rootElement=null,g.view.__controller=null,O(g))}}function N(b){var a=b.rootElement,g=b.__meta,m;for(m in b){var c=b[m];d(b,m)&&(c.rootElement=g&&g[m]&&g[m].rootElement?X(g[m].rootElement,a,c):a,c.view.__controller=c,N(c))}}function X(a,g,m){null==a&&c(Fa,[m.__name]);!x(a)&&"object"!==typeof a&&c(ia,[m.__name]);a=g?W(a,g):b(a);0===a.length&&c(va,[m.__name]);
1<a.length&&c(Ga,[m.__name]);return a.get(0)}function g(a){J(a);f(a);var g=a.__controllerContext.managed,m=k.core.controllerManager.controllers;-1===b.inArray(a,m)&&!1!==g&&m.push(a);!1!==g&&b(a.rootElement).trigger("h5controllerbound",a);g=p(a,"initPromise");g.push(a.initPromise);k.async.when(g).done(function(){F(a,!1)}).fail(Z)}function n(b){null===b.rootController&&C(b);N(b);F(b,!0)}function r(b,a){var g=Y();g.resolve();b.__controllerContext.templatePromise=g.promise();b.__controllerContext.initDfd=
Y();b.initPromise=b.__controllerContext.initDfd.promise();b.__controllerContext.readyDfd=Y();b.readyPromise=b.__controllerContext.readyDfd.promise();b.isInit=!1;b.isReady=!1;b.__controllerContext.args=a;for(var m in b)d(b,m)&&r(b[m])}function q(a,g){var m=null,c=g;b.isPlainObject(c)?m=c.target:c={};m=m?W(m,a.rootElement,!0):a.rootElement;return k.ui.indicator.call(a,m,c)}function w(a,g){var m=[],c=[],n=function(a){var e=Y();c.push(a);for(var q in a)if(d(a,q)){var r=a[q];-1===b.inArray(r,c)&&n(r)}a[g]&&
b.isFunction(a[g])&&(a=a[g](),k.async.isPromise(a)&&(a.always(function(){e.resolve()}),m.push(e.promise())))};n(a);return m}function L(a){var g=[],m=function(a){g.push(a);a.view.__view&&a.view.clear();for(var c in a)if(a.hasOwnProperty(c)){if(d(a,c)){var n=a[c];-1===b.inArray(n,g)&&m(n)}a[c]=null}};m(a)}function y(b,a){return a.view.__view.isAvailable(b)?a.view.__view:a.parentController?y(b,a.parentController):k.core.view}function la(b){return!b.__controllerContext||b.__controllerContext.isDisposing}
function Pa(b,a){function g(b,c){var d=b.__controllerContext[n[c]];d&&!ya(d)&&!za(d)&&d.rejectWith(b,[a]);if(b.parentController)g(b.parentController,c);else if(c<n.length-1)for(var d=0,e=m.length;d<e;d++)g(m[d],c+1)}var m=[],c=function(b){var a=!1,g;for(g in b)d(b,g)&&(a=!0,c(b[g]));a||m.push(b)};c(b);for(var n=["initDfd","readyDfd"],e=0,q=m.length;e<q;e++)g(m[e],0)}function Ha(b,a){for(var g=b.childNodes,m=0,c=g.length;m<c;m++){var d=g[m];if(1===d.nodeType){if(d=Ha(d,a))return d}else if(8===d.nodeType){var n=
d.nodeValue;if(0===n.indexOf(ja)){var e=n.indexOf("}");if(-1!==e&&(n=n.slice(0,e).match(/id="([A-Za-z][\w-:\.]*)"/))&&n[1]===a)return d}}}return null}function Ia(b){var a=this;return function(){b.apply(a,arguments)}}function Ca(b){var a=this;return function(){var g=k.u.obj.argsToArray(arguments);g.unshift(this);b.apply(a,g)}}function Ja(b){this.__controller=b;Oa("h5.core.view")&&(this.__view=k.core.view.createView())}function na(b,a,g,m){this.__name=a;this.__templates=null;this.rootElement=b;this.__controllerContext=
{executeListeners:!0,isRoot:m,bindMap:{},unbindMap:{}};this.__controllerContext.args=g?g:null;this.isReady=this.isInit=!1;this.readyPromise=this.initPromise=this.preinitPromise=this.parentController=this.rootController=null;this.log=k.log.createLogger(a);this.view=new Ja(this)}function ab(){this.rootElement=document;this.controllers=[];b(document).bind(Ka,function(b,a){null==a.target&&(a.target=document);a.indicator=q(this,a);b.stopPropagation()})}function Q(a,g,m,d){var q=!d||!d.isInternal,r=g.__name;
(!x(r)||0===b.trim(r).length)&&c(Qa,null,{controllerDefObj:g});m&&!b.isPlainObject(m)&&c(fa,[r],{controllerDefObj:g});g.__controllerContext&&c(La,null,{controllerDefObj:g});if(q||a)if(null==a)c(Fa,[r],{controllerDefObj:g});else if(x(a)||"object"===typeof a){var f=b(a);0===f.length&&c(va,[r],{controllerDefObj:g});1<f.length&&c(Ga,[r],{controllerDefObj:g})}else c(ia,[r],{controllerDefObj:g});e(g)&&c(wa,[r],{controllerDefObj:g});i(g)&&c(xa,[r],{controllerDefObj:g});var f=b.extend(!0,{},g),j=new na(a?
b(a).get(0):null,r,m,q),aa=g.__templates,$=Y(),a=$.promise(),w=Y(),p=w.promise();j.__controllerContext.preinitDfd=w;j.preinitPromise=p;j.__controllerContext.initDfd=Y();j.initPromise=j.__controllerContext.initDfd.promise().fail(Z);j.__controllerContext.readyDfd=Y();j.readyPromise=j.__controllerContext.readyDfd.promise();q||j.readyPromise.fail(Z);if(aa&&0<aa.length){var l=function(b){Oa("h5.core.view")||c(db);j.view.load(aa).done(function(){$.resolve()}).fail(function(a){var g=a.detail.error.status;
b===k.settings.dynamicLoading.retryCount||0!==g&&12029!==g?setTimeout(function(){$.reject(a)},0):setTimeout(function(){l(++b)},k.settings.dynamicLoading.retryInterval)})};l(0)}else $.resolve();a.done(function(){la(j)||w.resolveWith(j)}).fail(function(b){w.rejectWith(j,[b]);j.rootController&&j.rootController.dispose(b)});for(var B in f)if(Ra[B])c(ca,[r,B],{controllerDefObj:g});else if(("__ready"===B||"__construct"===B||"__init"===B)&&b.isFunction(f[B]))j[B]=o(f,B);else if(-1!==B.indexOf(" ")&&b.isFunction(f[B])){a=
b.trim(B);p=a.lastIndexOf(" ");q=b.trim(a.substring(0,p));a=b.trim(a.substring(p+1,a.length));E(a)&&(a="["+b.trim(h(a))+"]");G(q)&&"this"===D(q)&&c(Sa,[r],{controllerDefObj:g});p=j.__controllerContext.bindMap;p[q]||(p[q]={});p[q][a]&&c(Ta,[r,q,a],{controllerDefObj:g});var y=o(f,B,!0);p[q][a]=y;j[B]=y}else qa(B,ra)&&f[B]&&!b.isFunction(f[B])?(q=Q(null,b.extend(!0,{},f[B]),m,b.extend({isInternal:!0},d)),j[B]=q):qa(B,sa)&&f[B]&&!b.isFunction(f[B])?(q=da(f[B]),j[B]=q):j[B]=b.isFunction(f[B])?o(f,B):f[B];
if(m=j.__meta)for(B in m)q=j[B],void 0===q&&c(Ua,[r,B],{controllerDefObj:g}),null===q&&c(Va,[r,B],{controllerDefObj:g}),na.prototype.constructor!==q.constructor&&c(Ma,[r,B],{controllerDefObj:g});j.__construct&&j.__construct({args:j.__controllerContext.args});if(la(j))return null;d&&"managed"in d&&(j.__controllerContext.managed=d.managed);j.__controllerContext.isRoot&&n(j);return j}function da(a){var g=a.__name;(!x(g)||0===b.trim(g).length)&&c(m,null,{logicDefObj:a});a.__logicContext&&c(aa,null,{logicDefObj:a});
var a=b.extend(!0,{},a),d;for(d in a)a[d]=b.isFunction(a[d])?l(a[d],d,s(a.__name,d)):a[d];a.deferred=Y;a.log=k.log.createLogger(g);a.__logicContext={};a.own=Ia;a.ownWithOrg=Ca;for(var n in a)a.hasOwnProperty(n)&&qa(n,sa)&&(a[n]=da(a[n]));return a}var $a="undefined",ra="Controller",sa="Logic",ea="h5trackstart",Da="h5trackmove",ta="h5trackend",ua="rootElement",Ka="triggerIndicator",ja="{h5view ",ka=6E3,Fa=6001,va=6003,Ga=6004,Qa=6006,fa=6007,La=6008,wa=6009,xa=6010,ca=6011,Sa=6012,Ta=6013,Ua=6014,Va=
6015,Ma=6016,m=6017,aa=6018,db=6029,ia=6030,$=6033,Z=function(){},Y=k.async.deferred,Na=k.u.str.startsWith,qa=k.u.str.endsWith,eb=k.u.str.format,B=k.u.obj.argsToArray,Oa=k.u.obj.getByPath,Ea={SELECTOR_TYPE_LOCAL:1,SELECTOR_TYPE_GLOBAL:2,SELECTOR_TYPE_OBJECT:3},ha=[],ma=[];b.extend(t.prototype,Ea);b.extend(Ja.prototype,{get:function(b,a){return y(b,this.__controller).get(b,a)},update:function(b,a,g){b=W(b,this.__controller.rootElement,!0);return y(a,this.__controller).update(b,a,g)},append:function(b,
a,g){b=W(b,this.__controller.rootElement,!0);return y(a,this.__controller).append(b,a,g)},prepend:function(b,a,g){b=W(b,this.__controller.rootElement,!0);return y(a,this.__controller).prepend(b,a,g)},load:function(b){return this.__view.load(b)},register:function(b,a){this.__view.register(b,a)},isValid:function(b){return this.__view.isValid(b)},isAvailable:function(b){return y(b,this.__controller).isAvailable(b)},clear:function(b){this.__view.clear(b)},bind:function(a,g){var m=a;if(x(a)&&0===a.indexOf("h5view#")){for(var c=
Ha(this.__controller.rootElement,a.slice(7)),m=c.nodeValue,m=m.slice(m.indexOf("}")+1),d=b("<div>").append(m),m=[],n=d[0].childNodes,e=0,q=n.length;e<q;e++)m.push(n[e]);d.empty();d=document.createDocumentFragment();e=0;for(q=m.length;e<q;e++)d.appendChild(m[e]);c.parentNode.insertBefore(d,c.nextSibling)}return this.__view.bind(m,g)}});b.extend(na.prototype,{$find:function(a){return b(this.rootElement).find(a)},deferred:function(){return Y()},trigger:function(a,g){var m=x(a)?b.Event(a):a;b(this.rootElement).trigger(m,
g);return m},own:Ia,ownWithOrg:Ca,bind:function(b,a){this.__controllerContext.isRoot||c(6031);this.rootElement=X(b,null,this);this.view.__controller=this;r(this,a?a:null);n(this);return this},unbind:function(){this.__controllerContext.isRoot||c(6031);w(this,"__unbind");K(this);v(this);this.__controllerContext.unbindMap={};var a=this;k.core.controllerManager.controllers=b.grep(k.core.controllerManager.controllers,function(b){return b!==a});b(this.rootElement).trigger("h5controllerunbound",this);this.rootElement=
null;this.view.__controller=null;O(this)},dispose:function(b){if(!la(this)){Pa(this,b);this.__controllerContext.isDisposing=1;var a=this.deferred();this.unbind();var g=this,b=w(this,"__dispose");k.async.when(b).done(function(){L(g);a.resolve()});return a.promise()}},triggerIndicator:function(a){var g={indicator:null};a&&b.extend(g,a);b(this.rootElement).trigger(Ka,[g]);return g.indicator},indicator:function(b){return q(this,b)},enableListeners:function(){H(this,!0)},disableListeners:function(){H(this,
!1)},throwError:function(b,a){var g=B(arguments);g.unshift(null);this.throwCustomError.apply(null,g)},throwCustomError:function(b,a,g){2>arguments.length&&c(6005);var m=null;a&&x(a)?m=Error(eb.apply(null,B(arguments).slice(1))):(m=Error(),m.detail=a);m.customType=b;throw m;}});b.extend(ab.prototype,{getAllControllers:function(){return this.controllers},getControllers:function(a,g){for(var m=g&&g.deep,c=g&&g.name?I(g.name):null,d=b(a)[0],n=this.controllers,e=[],q=0,r=n.length;q<r;q++){var f=n[q];c&&
-1===b.inArray(f.__name,c)||(d===f.rootElement?e.push(f):m&&b.contains(d,f.rootElement)&&e.push(f))}return e}});k.u.obj.expose("h5.core",{controllerManager:new ab});var Ra={},oa=new na(null,"a"),ga;for(ga in oa)oa.hasOwnProperty(ga)&&"__name"!==ga&&"__templates"!==ga&&"__meta"!==ga&&(Ra[ga]=1);oa=null;oa=na.prototype;for(ga in oa)oa.hasOwnProperty(ga)&&(Ra[ga]=1);oa=null;Ya.controllerInternal=Q;k.u.obj.expose("h5.core",{controller:function(b,a,g){2>arguments.length&&c(6032);return Q(b,a,g)},logic:da,
expose:function(b){var a=b.__name;a||c(6019,null,{target:b});var g=a.lastIndexOf(".");if(-1===g)window[a]=b;else{var m=a.substr(0,g),a=a.substr(g+1,a.length),g={};g[a]=b;k.u.obj.expose(m,g)}}})})();(function(){function t(b){return(b=b.match(/^(string|number|integer|boolean|any|enum|@(.+?))((\[\]){0,1})$/))?{elmType:b[1],dataModel:b[2],dimension:b[3]?1:0}:{}}function z(a,g){return function ia(a,m){if(!g[a])return!1;for(var c=0,d=g[a].length;c<d;c++)if(-1<b.inArray(g[a][c],m)||ia(g[a][c],m.concat([a])))return!0;
return!1}(a,[])}function o(b){return"number"===typeof b&&isNaN(b)}function s(b,a){return null==b||o(b)||"number"===typeof b||!a&&(b instanceof Number||!(!(x(b)||b instanceof String)||!b.match(/^[+\-]{0,1}[0-9]*\.{0,1}[0-9]+$/)))}function l(b,a){return null==b||"number"===typeof b&&parseInt(b)===b||!a&&(b instanceof Number&&parseInt(b)===parseFloat(b)||("string"===typeof b||b instanceof String)&&!!b.match(/^[+\-]{0,1}[0-9]+$/))}function G(a,g,c){var d=[];if(!b.isPlainObject(a))return d.push(i(n)),
d;if(!da(a.name)&&(d.push(i(r)),c))return d;var e=a.base,f=null;if(null!=e)if(!x(e)||0!==e.indexOf("@")){if(d.push(i(q)),c)return d}else if(e=e.substring(1),g.models[e])f=g.models[e].schema;else if(d.push(i(w,e)),c)return d;a=a.schema;if(!f&&null==a&&(d.push(i(L)),c))return d;if(!f&&!b.isPlainObject(a))return d.push(i(y)),d;b.extend({},f,a);return d}function E(a,g,d,n){"object"!==typeof a&&c(Ba);var e=[];if(g){var q=!1,r;for(r in a)if(a[r]&&!0===a[r].id){if(q&&(e.push(i(la)),n))return e;q=!0}if(!q&&
(e.push(i(Pa)),n))return e}var q={},f;for(f in a){var j=null==a[f]?{}:a[f],w=!!j.id;if(!da(f)&&(e.push(i(Ha,f)),n))return e;var B=j.depend;if(null!=B){if(w&&(e.push(i(Ia,f)),n)||j.hasOwnProperty("defaultValue")&&(e.push(i(Ga,f)),n))return e;if(null==B.on){if(e.push(i(Ca,f)),n)return e}else for(var p=I(B.on),k=0,h=p.length;k<h;k++)if(!a.hasOwnProperty(p[k])){e.push(i(Ca,f));if(n)return e;break}if("function"!==typeof B.calc&&(e.push(i(Ja,f)),n))return e;q[f]=I(B.on)}p=j.type;w&&null==p&&(p="string");
B={};if(null!=p)if(x(p))if(w&&"string"!==p&&"integer"!==p&&e.push("id指定されたプロパティにtypeを指定することはできません"),B=t(p),B.elmType){if(B.dataModel&&(!g&&(e.push(i(Q,f,B.dataModel)),n)||!d.models[B.dataModel]&&(e.push(i(V,f,B.dataModel)),n))||"enum"===B.elmType&&null==j.enumValue&&(e.push(i(ja,f)),n))return e}else{if(e.push(i(Q,f,p)),n)return e}else if(e.push(i(na,f)),n)return e;p=j.constraint;if(null!=p)if(b.isPlainObject(p)){for(r in p)if(k=p[r],null!=k)switch(r){case "notNull":if(!0!==k&&!1!==k){if(e.push(i(ra,
f,r)),n)return e}else if(w&&!k&&(e.push(i(va,f,r,k)),n))return e;break;case "min":case "max":switch(B.elmType){case "integer":if(x(k)||!l(k)||o(k))if(e.push(i(sa,f,r)),n)return e;break;case "number":if(x(k)||x(k)||!s(k)||Infinity===k||-Infinity===k||o(k))if(e.push(i(sa,f,r)),n)return e;break;default:if(e.push(i(ea,f,r,B.elmType)),n)return e}break;case "minLength":case "maxLength":switch(B.elmType){case "string":if(x(k)||!l(k)||o(k)||0>k){if(e.push(i(ta,f,r)),n)return e}else if(w&&"maxLength"===r&&
0===k&&(e.push(i(va,f,r,k)),n))return e;break;default:if(e.push(i(ea,f,r,B.elmType)),n)return e}break;case "notEmpty":switch(B.elmType){case "string":if(!0!==k&&!1!==k){if(e.push(i(ra,f,r)),n)return e}else if(w&&!k&&(e.push(i(va,f,r,k)),n))return e;break;default:if(e.push(i(ea,f,r,B.elmType)),n)return e}break;case "pattern":switch(B.elmType){case "string":if("regexp"!==b.type(k)&&(e.push(i(Da,f,r)),n))return e;break;default:if(e.push(i(ea,f,r,B.elmType)),n)return e}}if(p.notEmpty&&0===p.maxLength&&
(e.push(i(ua,f,"notEmpty","maxLength")),n)||null!=p.min&&null!=p.max&&p.min>p.max&&(e.push(i(ua,f,"min","max")),n)||null!=p.minLength&&null!=p.maxLength&&p.minLength>p.maxLength&&(e.push(i(ua,f,"minLength","maxLength")),n))return e}else if(e.push(i(ka,f)),n)return e;p=j.enumValue;if(null!=p){if("enum"!==B.elmType&&(e.push(i(Ka,f)),n))return e;if(!b.isArray(p)||0===p.length||-1<b.inArray(null,p)||-1<b.inArray(void 0,p))if(e.push(i(ya,f)),n)return e}if(w&&j.hasOwnProperty("defaultValue")&&(e.push(i(za,
f)),n))return e}for(var y in q)if(z(y,q)&&(e.push(i(Qa,r)),n))break;return e}function D(b){return function(a){var g=[];b.notNull&&null==a&&g.push({notNull:b.notNull});b.notEmpty&&!a&&g.push({notEmpty:b.notEmpty});if(null==a)return g;null!=b.min&&a<b.min&&g.push({min:b.min});null!=b.max&&b.max<a&&g.push({max:b.max});null!=b.minLength&&a.length<b.minLength&&g.push({minLength:b.minLength});null!=b.maxLength&&b.maxLength<a.length&&g.push({maxLength:b.maxLength});null!=b.pattern&&!a.match(b.pattern)&&
g.push({pattern:b.pattern});return g}}function h(a,g){var c=[{type:a}];switch(a){case "number":return function(b,a){return s(b,a)?[]:c};case "integer":return function(b,a){return l(b,a)?[]:c};case "string":return function(b,a){return null==b||x(b)||!a&&b instanceof String?[]:c};case "boolean":return function(b,a){return null==b||"boolean"===typeof b||!a&&b instanceof Boolean?[]:c};case "enum":return function(a){var m;a:if(m=g.enumValue,o(a)){for(var a=0,d=m.length;a<d;a++)if(o(m[a])){m=!0;break a}m=
!1}else m=null===a||-1<b.inArray(a,m);return m?[]:c};case "any":return function(){return[]}}var d=a.match(/^@(.+?)$/)[1],e=g.manager;return function(b){var a=e.models[d];return!a||"object"!==typeof b&&null!=b?c:null==b||a.has(b)?[]:c}}function A(a){var g=a.checkFuncs;if(!g||0===g.length)return function(){return[]};var c=a.dimension||0;return function(a,m){function d(a,n){if(!n){for(var q=0,r=g.length;q<r;q++){var f=g[q](a,m);if(f.length)return e=e.concat(f),!1}return!0}if(null==a)return!0;if(!b.isArray(a)&&
!k.core.data.isObservableArray(a))return e.push({dimension:c}),!1;q=0;for(r=a.length;q<r;q++)if(!d(a[q],n-1))return!1;return!0}var e=[];d(a,c);return e}}function e(b){return!b?!1:-1!==b.indexOf("[]")}function i(){var b=arguments[0];if(!DESCRIPTOR_VALIDATION_ERROR_MSGS)return{code:b}}function d(a,d,n,q){function r(g){for(var g=I(a._schema[g].depend.on),c=0,d=g.length;c<d;c++)if(-1===b.inArray(g[c],a._realProperty)&&-1!==b.inArray(g[c],j))return!1;return!0}function f(a,g){for(var c=0,d=g.length;c<d;c++){var m=
p[g[c]];if(m)for(var e=0,n=m.length;e<n;e++){var q=m[e];-1===b.inArray(q,a)&&a.push(q)}}}var j=[],p=a._dependencyMap,i={};for(q?j=a._dependProps.slice():f(j,I(n));0!==j.length;){for(var n=[],q=0,k=j.length;q<k;q++){var w=j[q];if(r(w)){var h=a._schema[w].depend.calc.call(a,d);0!==a._itemValueCheckFuncs[w](h,!0).length&&c(g,[a._model?a._model.name:fa,w,h]);i[w]={oldValue:a._values[w],newValue:h};a._schema[w]&&e(a._schema[w].type)?h?(a._values[w].copyFrom(h),a._nullProps[w]=!1):(a._values[w].copyFrom([]),
a._nullProps[w]=!0):a._values[w]=h}else n.push(w)}f(n,j);j=n}return i}function p(a,g,n,q,r){var f=a._model instanceof H?a._model:null,j=a._schema,i=[],p;for(p in g)if(p in j||c(N,[f?f.name:fa,p]),!(q&&-1!==b.inArray(p,q))){var w=a._values[p],h=g[p];if(j[p]&&j[p].depend){if(w===h)continue;c(O,[f?f.name:fa,p])}var l=j[p]&&j[p].type;e(l)&&(null==h?(h=[],a._nullProps[p]=!0):a._nullProps[p]=!1);if(l&&l.match(/string|number|integer|boolean/)){var y=h;if(b.isArray(y)){for(var y=y.slice(0),h=0,L=y.length;h<
L;h++)y[h]=y[h]&&"object"===typeof y[h]?y[h]&&y[h].valueOf&&y[h].valueOf():y[h];h=y}else h=y&&"object"===typeof y&&y.valueOf?y.valueOf():y}-1===b.inArray(p,n)&&(y=a._validateItemValue(p,h),0<y.length&&c(T,[f?f.name:fa,p],y));if(null!=h&&l&&l.match(/number|integer/)&&"number"!==typeof h)if(b.isArray(h)||k.core.data.isObservableArray(h)){y=0;for(L=h.length;y<L;y++)null!=h[y]&&s(h[y])&&(h[y]=parseFloat(h[y]))}else null!=h&&(h=parseFloat(h));if(!e(l)||!w||!w.equals(h,w))w===h||o(w)&&o(h)||(l&&-1!==l.indexOf("[]")&&
k.core.data.isObservableArray(w)&&(w=w.toArray()),i.push({p:p,o:w,n:h}))}if(i.length){g={};n=[];y=0;for(q=i.length;y<q;y++)f=i[y],j[f.p]&&e(j[f.p].type)?f.n&&a._values[f.p].copyFrom(f.n):a._values[f.p]=f.n,g[f.p]={oldValue:f.o,newValue:a.get(f.p)},n.push(f.p);j={type:!0===r?"create":"change",target:a,props:g};b.extend(g,d(a,j,n,r));return j}}function f(b){var a=b._manager,b=b.name;a._updateLogs||(a._updateLogs={});a._updateLogs[b]||(a._updateLogs[b]={});return a._updateLogs[b]}function J(b,a,g){if(b._manager)for(var c=
f(b),d=0,e=g.length;d<e;d++){var n=g[d],q=n._values[b.idKey];c[q]||(c[q]=[]);c[q].push({type:a,item:n})}}function a(b,a){if(b._manager){var g=f(b),c=a.target._values[b.idKey];g[c]||(g[c]=[]);g[c].push({type:La,ev:a})}}function j(a,g,d){if(g){var e=G(g,d,!0);0<e.length&&c(P,null,e);(a=g.base)?(d||c(ERR_CODE_NO_MANAGER),a=d.models[a.slice(1)]._schema):a={};a=b.extend({},a,g.schema);e=e.concat(E(a,!0,d,!0))}else e=E(a,!1,null,!0);0<e.length&&c(S,null,e);var e=a,g={},n;for(n in e){var q=g,f=n,r;r=d;var j=
e[n]||{},p=[],w=null,k=0,w=j.type,y=j.constraint;j.id&&(w=w||"string",y=y||{},y.notNull=!0,"string"===w&&(y.notEmpty=!0));w&&(k=t(w),w=k.elmType,k=k.dimension,p.push(h(w,{manager:r,enumValue:j.enumValue})));j.constraint&&p.push(D(j.constraint));r=A({checkFuncs:p,dimension:k});q[f]=r}d=a;n=[];for(var l in d)if((e=d[l])&&(e.hasOwnProperty("defaultValue")||!e.type||!("array"===e.type||t(e.type).dimension))&&e.hasOwnProperty("defaultValue"))if(e=e.defaultValue,g[l](e).length){n.push(i(Fa,l,e));break}0<
n.length&&c(S,null,n);l=[];for(var o in a)l.push(o);o=[];d=[];n=[];for(var L in a)a[L]&&a[L].depend?d.push(L):o.push(L),a[L]&&a[L].type&&-1!==a[L].type.indexOf("[]")&&n.push(L);L=a;var e={},v;for(v in L)if(L.hasOwnProperty(v)&&(q=L[v]?L[v].depend:null)){q=I(q.on);f=0;for(r=q.length;f<r;f++)j=q[f],e[j]||(e[j]=[]),-1===b.inArray(v,e[j])&&e[j].push(v)}return{_itemValueCheckFuncs:g,_schemaKeys:l,_schema:a,_realProps:o,_dependProps:d,_aryProps:n,_dependencyMap:e}}function v(){}function K(b){da(b)||c(pa);
this.models={};this.name=b;this._updateLogs=null}function H(b,a,g){this.items={};this.size=0;this.name=b.name;this._manager=g;var b=a._schema,c;for(c in b)b[c]&&b[c].id&&(this.idKey=c);this._idType=(c=b[this.idKey].type)?"string"===c?R:W:R;this._schema=b;this._itemConstructor=C(a,this);g.models[this.name]=this}function C(g,d){function n(g,e,m){var q=!1,f=["sort","reverse","pop","shift"],r;m.addEventListener("changeBefore",function(a){d&&(g._model!==d||!d._manager)&&c(ba,[g._values[d.idKey],a.method]);
var n=k.u.obj.argsToArray(a.args);if(-1===b.inArray(a.method,f)){var m=!0;switch(a.method){case "splice":m=!1;n.shift();n.shift();break;case "copyFrom":n=n[0];break;case "set":n.shift()}m&&(a=g._validateItemValue(e,n),0<a.length&&c(T,e,a))}d?(a=d,a._manager&&(n=a._manager,m=a.name,n._oldValueLogs||(n._oldValueLogs={}),n._oldValueLogs[m]||(n._oldValueLogs[m]={}),n=n._oldValueLogs[m],a=g._values[a.idKey],n[a]||(n[a]={}),n[a][e]||(n[a][e]=g._values[e].toArray())),(q=d._manager?d._manager.isInUpdate():
!1)||d._manager.beginUpdate()):r=g._values[e].toArray()});m.addEventListener("change",function(){if(!g._isInSet){var b={type:"change",target:g,props:{}};b.props[e]={};d?(a(d,b),q||d._manager.endUpdate()):m.equals(r)||(b.props[e]={oldValue:r,newValue:g._values[e]},g.dispatchEvent(b))}})}function q(b){this._values={};this._nullProps={};var a={},r=[],j=g._aryProps,w;for(w in b)f.hasOwnProperty(w)||c(N,[d?d.name:fa,w]);for(var h in f){if((w=f[h])&&e(w.type)){var i=u();i.relatedItem=this;this._values[h]=
i;this._nullProps[h]=!0}w&&w.depend?b&&h in b&&c(O,[d?d.name:fa,h]):(i=null,b&&h in b?i=b[h]:w&&void 0!==w.defaultValue?(i=w.defaultValue,e(w.type)&&r.push(h)):(i=null,w&&e(w.type)&&r.push(h)),a[h]=i)}p(this,a,r,null,!0);b=0;for(a=j.length;b<a;b++)n(this,j[b],this.get(j[b]))}var f=g._schema;b.extend(q.prototype,v.prototype,g,{get:function(a){if(0===arguments.length)return b.extend({},this._values);f.hasOwnProperty(a)||c(X,[d?d.name:fa,a]);return this._values[a]},set:function(b){this._isInSet=!0;var g=
!1,e=b;2===arguments.length&&(e={},e[arguments[0]]=arguments[1]);d&&(g=d.idKey,(this._model!==d||!this._model._manager)&&c(ba,[this._values[g],"set"],this),g in e&&e[g]!==this._values[g]&&c(Aa,null,this),(g=d._manager?d._manager.isInUpdate():!1)||d._manager.beginUpdate());e=p(this,e,null);this._isInSet=!1;d?(e&&a(d,e),g||d._manager.endUpdate()):e&&this.dispatchEvent(e)},regardAsNull:function(b){return this._isArrayProp(b)?!0===this._nullProps[b]:null===this._values[b]},_isArrayProp:function(b){return f[b]&&
f[b].type&&-1<f[b].type.indexOf("[]")?!0:!1},_validateItemValue:function(b,a){return this._itemValueCheckFuncs[b](a)}});d&&b.extend(q.prototype,{_model:d,getModel:function(){return this._model}});return q}function F(){this.length=0;this._src=[]}function u(){return new F}function M(b){return b&&b.constructor===F?!0:!1}var R="string",W="number",pa=15E3,P=15001,Aa=15003,ba=15005,Ba=15008,S=15009,T=15011,O=15012,N=15013,X=15014,g=15016,n=15900,r=15901,q=15902,w=15903,L=15904,y=6,la=15800,Pa=15801,Ha=
15802,Ia=15803,Ca=15804,Ja=15805,na=15806,Q=15807,V=15808,ja=15809,ka=15810,ra=15811,sa=15812,ea=15813,Da=15814,ta=15815,ua=15816,Ka=15817,ya=15818,za=15819,Fa=15820,va=15821,Ga=15822,Qa=15823,fa="n/a",La=2;v.prototype.hasEventListener=function(b,a){if(!this.__listeners)return!1;var g=this.__listeners[b];if(!g||!this.__listeners.hasOwnProperty(b))return!1;for(var c=0,d=g.length;c<d;c++)if(g[c]===a)return!0;return!1};v.prototype.addEventListener=function(a,g){(2!==arguments.length||!x(a)||!b.isFunction(g))&&
c(15015);this.hasEventListener(a,g)||(this.__listeners||(this.__listeners={}),this.__listeners.hasOwnProperty(a)||(this.__listeners[a]=[]),this.__listeners[a].push(g))};v.prototype.removeEventListener=function(b,a){if(this.hasEventListener(b,a))for(var g=this.__listeners[b],c=0,d=g.length;c<d;c++)if(g[c]===a){g.splice(c,1);break}};v.prototype.dispatchEvent=function(b){if(this.__listeners){var a=this.__listeners[b.type];if(a){b.target||(b.target=this);var g=!1;b.preventDefault=function(){g=true};for(var c=
0,d=a.length;c<d;c++)a[c].call(b.target,b);return g}}};K.prototype=new v;b.extend(K.prototype,{createModel:function(a){(!a||"object"!==typeof a)&&c(P,null,[i(n)]);if(!b.isArray(a)){if(this.models[a.name])return this.models[a.name];var g=j(a.schema,a,this);return new H(a,g,this)}var d=a.length;d||c(P,null,[i(n)]);for(var e={},q=[],f=0;f<d;f++)if(g=a[f].name,this.models[g])y[f]=manager.models[a.name];else try{q.push(g);g=[];a[f].base&&g.push(a[f].base.substring(1));for(var r in a[f].schema){var p=a[f].schema[r];
if(p){var h=p.type;h&&"@"===h.substring(0,1)&&(h=-1===h.indexOf("[]")?h.substring(1):h.substring(1,h.length-2),g.push(h))}}e[f]={depends:g}}catch(k){c(P)}for(var y={size:0};y.size<d;){r={};p=!1;for(f=0;f<d;f++)if(!e[f].registed){for(var g=e[f].depends,h=0,l=g.length;h<l;h++)if(!this.models[g[h]]){r[g[h]]=!0;break}h===l&&(g=j(a[f].schema,a[f],this),y[f]=new H(a[f],g,this),y.size++,p=!0,e[f].registed=!0)}if(!p){var f=!0,o;for(o in r)if(-1===b.inArray(o,q)){f=!1;break}f&&c(15004);c(P,null,[i(w,o)])}}a=
[];for(f=0;f<d;f++)a.push(y[f]);return a},dropModel:function(a){if((a=x(a)?a:"object"===typeof a?a.name:null)&&this.models[a]){var b=this.models[a];b._manager=null;delete this.models[a];return b}},isInUpdate:function(){return null!==this._updateLogs},beginUpdate:function(){this.isInUpdate()||(this._updateLogs={})},endUpdate:function(){if(this.isInUpdate()){var a=this._updateLogs,b=this._oldValueLogs;this._oldValueLogs=this._updateLogs=null;var g={},c;for(c in a)if(a.hasOwnProperty(c)){var d;d=this.models[c];
var e=a[c],n=[],f=[],q=[],r=[],j=void 0;for(j in e){for(var h=e[j],p=!0,w=[],i=h.length-1;0<=i;i--){var y=h[i],l=y.type;if(l===La)w.push(y.ev);else{a:{for(p=0;p<i;p++){var L=h[p].type;if(1===L||3===L){i=h[p];break a}}i=null}if(1===l)i&&3===i.type?n.push({id:j,oldItem:i.item,newItem:y.item}):f.push(y.item);else if(i=i&&3===i.type?i.item:i?null:y.item)r.push(i),i.dispatchEvent({type:"remove",model:d});p=!1;break}}if(p&&0<w.length){y={};for(i=w.length-1;0<=i;i--)for(var v in w[i].props)y[v]||(k.core.data.isObservableArray(d.get(j).get(v))?
(l=b&&b[d.name]&&b[d.name][j]&&b[d.name][j][v],d.get(j).get(v).equals(l)||(y[v]={oldValue:l})):y[v]={oldValue:w[i].props[v].oldValue});i=!1;for(v in y)l=y[v].oldValue,h=d.get(j).get(v),l===h||o(l)&&o(h)?delete y[v]:(y[v].newValue=d.get(j).get(v),i=!0);i&&(w={type:"change",target:w[0].target,props:y},q.push(w),w.target.dispatchEvent(w))}}(d=0===f.length&&0===n.length&&0===r.length&&0===q.length?!1:{created:f,recreated:n,removed:r,changed:q})&&(g[c]=d)}a=!1;for(c in g)a=!0,d=g[c],this.models[c].dispatchEvent({type:"itemsChange",
created:d.created,recreated:d.recreated,removed:d.removed,changed:d.changed});g={type:"itemsChange",models:g};a&&this.dispatchEvent(g)}},_dataModelItemsChangeListener:function(a){var b=a.target.manager,g={};g[a.target.name]=a;b.dispatchEvent({type:"itemsChange",models:g})}});b.extend(H.prototype,v.prototype,{create:function(g){this._manager||c(15006,[this.name,"create"]);"object"!==typeof g&&!b.isArray(g)&&c(15007);var d=[],e=this.idKey,n=this._manager?this._manager.isInUpdate():!1;n||this._manager.beginUpdate();
for(var f=[],q=I(g),r=0,j=q.length;r<j;r++){var h=q[r],i=h[e];(""===i||null==i)&&c(15002);!l(i,!0)&&!x(i)&&c(T,[this.name,e]);var w=this._findById(i);w?(d.push(w),(i=p(w,h,null,[e]))&&a(this,i)):(h=new this._itemConstructor(h),this.items[i]=h,this.size++,f.push(h),d.push(h))}0<f.length&&J(this,1,f);n||this._manager.endUpdate();return b.isArray(g)?d:d[0]},get:function(a){if(b.isArray(a)||k.core.data.isObservableArray(a)){for(var g=[],d=0,c=a.length;d<c;d++)g.push(this._findById(a[d]));return g}return this._findById(a)},
remove:function(a){this._manager||c(15006,[this.name,"remove"]);var g=this._manager?this._manager.isInUpdate():!1;g||this._manager.beginUpdate();for(var d=this.idKey,e=I(a),n=[],f=[],q=0,r=e.length;q<r;q++)if(this.has(e[q])){var j=x(e[q])||l(e[q],!0)?e[q]:e[q]._values[d],h=this.items[j];delete this.items[j];this.size--;f.push(h);h._model=null;n.push(h)}else f.push(null);0<n.length&&J(this,3,n);g||this._manager.endUpdate();return b.isArray(a)?f:f[0]},removeAll:function(){var a=this.toArray();0<a.length&&
this.remove(a);return a},has:function(a){return x(a)||l(a,!0)?!!this._findById(a):"object"===typeof a?null!=a&&b.isFunction(a.get)&&a===this.items[a.get(this.idKey)]:!1},getManager:function(){return this._manager},_findById:function(a){a=this.items[a];return void 0===a?null:a},_dispatchItemsChangeEvent:function(a){a={type:"itemsChange",created:[],recreated:[],removed:[],changed:[a]};this.dispatchEvent(a);this._manager&&(a.target=this,this._manager._dataModelItemsChangeListener(a))},toArray:function(){var a=
[],b=this.items,g;for(g in b)b.hasOwnProperty(g)&&a.push(b[g]);return a}});b.extend(F.prototype,v.prototype);var wa={equals:function(a){var g=this.length;if(!b.isArray(a)&&!M(a)||a.length!==g)return!1;for(var a=M(a)?a._src:a,d=0;d<g;d++){var c=this[d],e=a[d];if(!(c===e||o(c)&&o(e)))return!1}return!0},copyFrom:function(a){null==a&&(a=[]);a=M(a)?a._src:a;b.isArray(a)||c(15010,[0,a]);a=a.slice(0);a.unshift(0,this.length);Array.prototype.splice.apply(this,a)},get:function(a){return this[a]},set:function(a,
b){this[a]=b},toArray:function(){return this.slice(0)},concat:function(){for(var a=k.u.obj.argsToArray(arguments),b=0,g=a.length;b<g;b++)M(a[b])&&(a[b]=a[b].toArray());return this.concat.apply(this,a)}},xa="concat,join,pop,push,reverse,shift,slice,sort,splice,unshift,indexOf,lastIndexOf,every,filter,forEach,map,some,reduce,reduceRight".split(","),ca;for(ca in wa)wa.hasOwnProperty(ca)&&-1===b.inArray(ca,xa)&&xa.push(ca);var Sa=["concat","slice","splice","filter","map"],Ta=["reverse","sort"],Ua="sort,reverse,pop,shift,unshift,push,splice,copyFrom,set".split(",");
ca=0;for(var Va=xa.length;ca<Va;ca++){var Ma=xa[ca];F.prototype[Ma]=function(a){function g(){var c=d.apply(this._src,arguments);if(-1!==b.inArray(a,Ta))c=this;else if(-1!==b.inArray(a,Sa)){var e=u();e.copyFrom(c);c=e}return c}var d=wa[a]?wa[a]:Array.prototype[a];return-1===b.inArray(a,Ua)?g:function(){if(!this.dispatchEvent({type:"changeBefore",method:a,args:arguments})){var b=g.apply(this,arguments);this.length=this._src.length;this.dispatchEvent({type:"change",method:a,args:arguments,returnValue:b});
return b}}}(Ma)}k.u.obj.expose("h5.core.data",{createManager:function(a,b){da(a)||c(pa);var g=new K(a);if(null!=b){""===b&&(b="window");var d={};d[a]=g;k.u.obj.expose(b,d)}return g},createObservableArray:u,createObservableItem:function(a){a=j(a);return new (C(a))},isObservableArray:M,isObservableItem:function(a){return!(!a||!a.constructor||"DataItem"!==a.constructor.name||b.isFunction(a.getModel))},createSequence:function(a,g,d){function c(){return r}function e(){var a=r;r+=j;return a}function n(){return r.toString()}
function f(){var a=r;r+=j;return a.toString()}function q(){}var r=null!=a?a:1,j=null!=g?g:1,a=1===d?{current:n,next:f,returnType:1}:{current:c,next:e,returnType:2};a.setCurrent=function(a){r=a};b.extend(q.prototype,a);return new q},SEQ_STRING:1,SEQ_INT:2})})();(function(){function t(a,b){return!a||a.nodeType!==j?void 0:a.getAttribute(b)}function z(a){if(!a)return null;for(var b=[],d=0,c=a.length;d<c;d++)b.push(a[d]);return b}function o(a,b,d,c){var e=[],b=I(b);if(!0===c)return s(e,a,b,d),e;for(var a=
a.childNodes,c=0,f=a.length;c<f;c++)s(e,a[c],b,d);return e}function s(a,b,d,c){if(b.nodeType===j){for(var e=0,f=d.length;e<f;e++){var h=b.getAttribute(d[e]);if(void 0===c){if(null!==h){a.push(b);break}}else if(null!==h&&h==c){a.push(b);break}}if(0<b.childNodes.length){b=b.childNodes;e=0;for(f=b.length;e<f;e++)s(a,b[e],d,c)}}}function l(a,d){for(var a=I(a),c=[],e=0,f=a.length;e<f;e++){var h=a[e];if(h.nodeType===j&&!(!0===d&&(null!=t(h,K)||null!=t(h,H))))for(var i=o(h,v,void 0,!0),p=0,k=i.length;p<
k;p++){for(var l=!0,s=i[p];null!=s&&s!==h;s=s.parentNode)if(null!=t(s,K)||null!=t(s,H)){l=!1;break}l&&c.push(i[p])}}return b(c)}function x(a,d,c){for(var e=[],f=0,h=a.length;f<h;f++){var i=a[f];if(i.nodeType===j){if(!0===c){if(null!=i.getAttribute(d)){e.push(i);continue}if(null!=t(i,K)||null!=t(i,H))continue}for(var p=o(i,d,void 0,!1),k=0,l=p.length;k<l;k++){var v=b(p[k]).parent("[data-h5-context],[data-h5-loop-context]")[0];(void 0===v||v===i)&&e.push(p[k])}}}return b(e)}function E(a){return a&&
a.addEventListener&&a.getModel&&!b.isArray(a)&&!k.core.data.isObservableArray(a)||k.core.data.isObservableItem(a)?!0:!1}function D(a,b){for(var d=0,c=a.length;d<c;d++){var e=a[d];e.nodeType===j&&e.setAttribute(F,b)}}function h(a,d,e){var f=S++,j=d[0];b(j).empty();if(e){!b.isArray(e)&&!k.core.data.isObservableArray(e)&&c(ba);D(d,f);a._addBindingEntry(e,j,f);k.core.data.isObservableArray(e)&&!a._isWatching(e)&&(d=function(b){a._observableArray_changeListener(b)},a._listeners[a._getContextIndex(e)]=
d,e.addEventListener("change",d));var d=t(j,C),d=z(a._getSrcCtxNode(d).childNodes),h=[];a._loopElementsMap[f]=h;for(var f=document.createDocumentFragment(),i=e.get?function(a){return e.get(a)}:function(a){return e[a]},p=0,l=e.length;p<l;p++){for(var o=[],v=0,s=d.length;v<s;v++){var u=X(d[v]);o.push(u);f.appendChild(u)}h[p]=o;j.appendChild(f);A(a,o,i(p),!1,!0)}}}function A(a,d,f,q,j){d=I(d);if(q)h(a,d,f);else{q=S++;f&&(("object"!==typeof f||b.isArray(f)||k.core.data.isObservableArray(f))&&c(ba),D(d,
q),a._addBindingEntry(f,d,q));var p=E(f);p&&!a._isWatching(f)&&(q=function(b){a._observableItem_changeListener(b)},a._listeners[a._getContextIndex(f)]=q,f.addEventListener("change",q));l(d,j).each(function(){i(this,f,p)});e(a,d,f,!1,j);e(a,d,f,!0,j)}}function e(a,b,d,c,e){var f=c?"data-h5-loop-context":"data-h5-context";x(b,f,e).each(function(){var b=t(this,f),e=null;d&&(e=E(d)?d.get(b):d[b]);A(a,this,e,c)})}function i(a,d,e){for(var f=t(a,v).split(W),j=[],h=[],i=[],p=0,k=f.length;p<k;p++){var l=
f[p];if(-1===l.indexOf(R))0<b.trim(l).length&&(j.push(null),h.push(null),i.push(b.trim(l)));else{var o=l.split(R),l=b.trim(o[0]),o=b.trim(o[1]),s=null,u=pa.exec(l);u&&(s=u[1],l=/(\S+)[\s\(]/.exec(l)[1]);0<l.length&&0<o.length&&(j.push(l),h.push(s),i.push(o))}}f=b(a);p=0;for(k=j.length;p<k;p++)switch(o=j[p],s=h[p],u=i[p],l=null,d&&(l=e?d.get(u):d[u]),null==o&&("input"===a.tagName.toLowerCase()?(o="attr",s="value"):o="text"),o){case "text":null==l?f.text(""):f.text(l);break;case "html":null==l?f.html(""):
f.html(l);break;case "class":var o=t(a,M),u=(s=null==o)?"":" ",z=!1;l&&(z=!RegExp("\\s"+l+"\\s").test(" "+o+" "));f[0].className=(s?"":o)+(z?u+l:"");break;case "attr":s||c(P);null==l?f.removeAttr(s):f.attr(s,l);break;case "style":s||c(P);null==l?f.css(s,""):f.css(s,l);break;default:c(Aa)}}function d(a,b,d){for(var c=0,e=d.length;c<e;c++){var f=d[c];b.removeChild(f);a._removeBinding(f)}}function p(a){for(var a=a.childNodes,b=[],d=0,c=a.length;d<c;d++)b.push(X(a[d]));return b}function f(a,b,d,c,e){for(var f=
document.createDocumentFragment(),j=[],h=0,i=e.length;h<i;h++){var k=p(d);j[h]=k;for(var l=0,o=k.length;l<o;l++)f.appendChild(k[l]);A(a,k,e[h])}Array.prototype[c].apply(b,j);return f}function J(a,b,c,e,f,j){var h=e.length;if(0!==h){for(var i=e[0],k=i,c=1===h?c.length:k+e[1];k<c;k++){var l=f[k];l&&d(a,b,l)}f.splice(i,e[1]);if(!(2>=h)){k=f.length;k=0===k||0===i?b.firstChild:i>=k?null:f[i][0];c=document.createDocumentFragment();i=[i,0];for(l=2;l<h;l++){for(var o=p(j),v=0,s=o.length;v<s;v++)c.appendChild(o[v]);
A(a,o,e[l]);i.push(o)}b.insertBefore(c,k);Array.prototype.splice.apply(f,i)}}}function a(a,b){void 0!==a.nodeType?a.nodeType===j&&(this._parent=a.parentNode,this._targets=[a]):(this._parent=a[0].parentNode,this._targets=z(a));this._bindRootId=T++;O[this._bindRootId]=this;for(var d=[],c=0,e=this._targets.length;c<e;c++){var f=this._targets[c];if(f.nodeType===j){f.setAttribute(u,this._bindRootId);for(var h=o(f,[K,H],void 0,!0),i=0,p=h.length;i<p;i++){var k=Ba++;h[i].setAttribute(C,k)}h=o(f,v,void 0,
!0);i=0;for(p=h.length;i<p;i++)k=h[i],/class\s*:/.test(t(k,v))&&""!=k.className&&k.setAttribute(M,k.className)}d.push(f.cloneNode(!0))}this._srces=d;this._loopElementsMap={};this._rootContext=b;this._usingContexts=[];this._srcToViewMap={};this._listeners={};A(this,this._targets,this._rootContext,!1,!0)}var j=1,v="data-h5-bind",K="data-h5-context",H="data-h5-loop-context",C="data-h5-dyn-ctx",F="data-h5-dyn-vid",u="data-h5-dyn-bind-root",M="data-h5-dyn-cn",R=":",W=";",pa=/\(\s*(\S+)\s*\)/,P=7100,Aa=
7101,ba=7102,Ba=0,S=0,T=0,O={},N={},X;(function(){var a=document.createElement("div");a.h5Dummy="a";var d=a.cloneNode(!1),c=void 0!==d.h5Dummy;a.h5Dummy=void 0;c?(d.h5Dummy=void 0,X=function(a){return a.nodeType===j?b(b.trim(a.outerHTML))[0]:a.cloneNode(!0)}):X=function(a){return a.cloneNode(!0)}})();b.extend(a.prototype,{unbind:function(){for(var a=0,b=this._targets.length;a<b;a++){var d=this._targets[a];if(d.nodeType===j){this._removeBinding(d);d.removeAttribute(u);for(var c=o(d,M,void 0,!0),e=
0,f=c.length;e<f;e++)c[e].removeAttribute(M);d=o(d,C,void 0,!0);e=0;for(c=d.length;e<c;e++)d[e].removeAttribute(C)}}delete O[this._bindRootId]},_observableArray_changeListener:function(a){var b=this._getViewsFromSrc(a.target);if(b)for(var c in b)if(b.hasOwnProperty(c)){var e=b[c],j=this._getSrcCtxNode(t(e,C)),h=this._loopElementsMap[c];switch(a.method){case "set":J(this,e,a.target,[a.args[0],1,a.args[1]],h,j);break;case "shift":case "pop":var i=h[a.method]();i&&d(this,e,i);break;case "unshift":i=
f(this,h,j,a.method,a.args);e.insertBefore(i,e.firstChild);break;case "push":i=f(this,h,j,a.method,a.args);e.appendChild(i);break;case "splice":J(this,e,a.target,a.args,h,j);break;case "reverse":for(var i=e,k=h;i.firstChild;)i.removeChild(i.firstChild);for(var l=0,e=k.length;l<e;l++)for(var j=k[l],o=j.length-1;0<=o;o--)i.insertBefore(j[o],i.firstChild);h.reverse();break;case "sort":case "copyFrom":for(var i=this._loopElementsMap,k=c,l=a.target,o=h,h=j,j=0,v=o.length;j<v;j++)d(this,e,o[j]);for(var o=
document.createDocumentFragment(),v=[],j=0,s=l.length;j<s;j++){var u=p(h);v[j]=u;for(var z=0,x=u.length;z<x;z++)o.appendChild(u[z]);A(this,u,l.get(j))}e.appendChild(o);i[k]=v}}},_observableItem_changeListener:function(a){var b=this._getViewsFromSrc(a.target);if(b){var d=!1;a.target===this._rootContext&&(d=!0);var c=this,e;for(e in b)if(b.hasOwnProperty(e)){var f=b[e];l(f,d).each(function(){i(this,a.target,!0)});x(f,K).each(function(){var b=t(this,K);if(!(b in a.props))return!0;c._removeBinding(this);
var d=t(this,C),d=c._getSrcCtxNode(d),d=X(d);this.parentNode.replaceChild(d,this);A(c,d,a.props[b].newValue)});x(f,H).each(function(){var b=t(this,H);if(!(b in a.props)||a.target._isArrayProp(b))return!0;c._removeBinding(this);A(c,this,a.props[b].newValue,!0)})}}},_getSrcCtxNode:function(a){for(var b=0,d=this._srces.length;b<d;b++){var c=this._srces[b];if(t(c,C)===a)return c;c=o(c,C,a);if(0<c.length)return c[0]}return null},_isWatching:function(a){a=this._getContextIndex(a);return-1===a?!1:null!=
this._listeners[a]},_getContextIndex:function(a){return b.inArray(a,this._usingContexts)},_addBindingEntry:function(a,b,d){var c=this._getContextIndex(a);-1===c&&(this._usingContexts.push(a),c=this._usingContexts.length-1);N[d]=a;(a=this._srcToViewMap[c])?a[d]=b:(a={},a[d]=b,this._srcToViewMap[c]=a)},_hasBindingForSrc:function(a){for(var b in a)if(a.hasOwnProperty(b))return!0;return!1},_removeBindingEntry:function(a){var b=N[a];if(b){var d=this._getContextIndex(b);if(-1!==d){var c=this._srcToViewMap[d];
c&&c[a]&&(delete c[a],this._hasBindingForSrc(c)||(c=!1,E(b)?(b.removeEventListener("change",this._listeners[d]),c=!0):k.core.data.isObservableArray(b)&&(b.removeEventListener("change",this._listeners[d]),c=!0),c&&delete this._listeners[d],delete this._srcToViewMap[d]))}N[a]&&delete N[a]}},_removeBinding:function(a){if(a.nodeType===j){var b=t(a,F);null!=b&&(this._removeBindingEntry(b),a.removeAttribute(F));for(var a=o(a,F),b=0,d=a.length;b<d;b++){var c=a[b];this._removeBindingEntry(t(c,F));c.removeAttribute(F)}}},
_getViewsFromSrc:function(a){a=this._getContextIndex(a);return-1===a?null:this._srcToViewMap[a]}});Za={createBinding:function(b,d){return new a(b,d)}}})();(function(){function t(d){return k.u.obj.isJQueryObject(d)?d:b(d)}function z(){this.__cachedTemplates={}}var o="[",s=7001,l=7002,G=7003,E=7010,D=7011,h=k.async.deferred,A={escapeHtml:function(b){return k.u.str.escapeHtml(b)}},e={MAX_CACHE:10,cache:{},cacheUrls:[],accessingUrls:{},append:function(b,c,e){this.cacheUrls.length>=this.MAX_CACHE&&this.deleteCache(this.cacheUrls[0]);
this.cache[b]={};this.cache[b].templates=c;this.cache[b].path=e;this.cacheUrls.push(b)},deleteCache:function(b,c){c||delete this.cache[b];for(var e=0,i=this.cacheUrls.length;e<i;e++)if(this.cacheUrls[e]===b){this.cacheUrls.splice(e,1);break}},getTemplateByUrls:function(d){function e(a){if(0!==a.length){var d={},f=[];a.each(function(){var a=b.trim(this.id),e=b.trim(this.innerHTML);a||c(l,null,{});try{var j=new EJS.Compiler(e,o);j.compile();d[a]=j.process;f.push(a)}catch(i){e=i.lineNumber,c(E,[e?" line:"+
e:"",i.message],{id:a,error:i,lineNo:e})}});return{compiled:d,data:{ids:f}}}}function f(a,d,c){k.ajax(d).done(function(d,f,j){delete v.accessingUrls[a];d=b(j.responseText).filter(function(){return this.tagName&&-1===this.tagName.indexOf("/")&&8!==this.nodeType});f=this.url;if(0<d.not('script[type="text/ejs"]').length)c.reject(V(D,null,{url:a,path:f}));else{j=null;try{j=e(d.filter('script[type="text/ejs"]'))}catch(i){i.detail.url=a;i.detail.path=f;c.reject(i);return}var h,k;try{var l=j.compiled;k=
j.data;k.path=f;k.absoluteUrl=a;h=l;v.append(a,l,f)}catch(o){c.reject(V(s,null,{error:o,url:a,path:f}));return}c.resolve({ret:h,data:k})}}).fail(function(b){delete v.accessingUrls[a];c.reject(V(G,[b.status,a],{url:a,path:d,error:b}))})}for(var i={},a=[],j=[],v=this,t=function(a){var b=v.cache[a].templates;v.deleteCache(a,!0);v.cacheUrls.push(a);return b},z=0;z<d.length;z++){var C=d[z],A=Q(C);if(this.cache[A])b.extend(i,t(A)),j.push({absoluteUrl:A});else if(this.accessingUrls[A])a.push(this.accessingUrls[A]);
else{var u=k.async.deferred();a.push(this.accessingUrls[A]=u.promise());f(A,C,u)}}var x=h();k.async.when(a).done(function(){for(var a=k.u.obj.argsToArray(arguments),d=0,c=a.length;d<c;d++)b.extend(i,a[d].ret),j.push(a[d].data);x.resolve(i,j)}).fail(function(a){x.reject(a)});return x.promise()}};b.extend(z.prototype,{load:function(d){var i=h(),f=this,k=null;switch(b.type(d)){case "string":b.trim(d)||c(7004);k=[d];break;case "array":k=d;0===k.length&&c(7004);for(var d=0,a=k.length;d<a;d++)x(k[d])?b.trim(k[d])||
c(7004):c(7004);break;default:c(7004)}e.getTemplateByUrls(k).done(function(a,d){b.extend(f.__cachedTemplates,a);i.resolve(d)}).fail(function(a){i.reject(a)});return i.promise()},getAvailableTemplates:function(){var b=[],c;for(c in this.__cachedTemplates)b.push(c);return b},register:function(d,e){"string"!==b.type(e)?c(7E3,null,{id:d}):(!x(d)||!b.trim(d))&&c(l,[]);try{var f=new EJS.Compiler(e,o);f.compile();this.__cachedTemplates[d]=f.process}catch(i){f=i.lineNumber,c(E,[f?" line:"+f:"",i.message],
{id:d})}},isValid:function(b){try{return(new EJS.Compiler(b,o)).compile(),!0}catch(c){return!1}},get:function(d,e){var f=this.__cachedTemplates;if(b.isEmptyObject(f))return null;(!x(d)||!b.trim(d))&&c(l);(f=f[d])||c(7005,d);var i=e?b.extend(!0,{},e):{},a=i.hasOwnProperty("_h")?new EJS.Helpers(i):new EJS.Helpers(i,{_h:A}),j=null;try{j=f.call(i,i,a)}catch(h){c(7006,h.toString(),h)}return j},update:function(b,c,e){return t(b).html(this.get(c,e))},append:function(b,c,e){return t(b).append(this.get(c,
e))},prepend:function(b,c,e){return t(b).prepend(this.get(c,e))},isAvailable:function(b){return!!this.__cachedTemplates[b]},clear:function(d){if(void 0===d)this.__cachedTemplates={};else{var e=null;switch(b.type(d)){case "string":e=[d];break;case "array":d.length||c(l);e=d;break;default:c(l)}for(var d=0,f=e.length;d<f;d++){var i=e[d];(!x(i)||!b.trim(i))&&c(l)}d=0;for(f=e.length;d<f;d++)delete this.__cachedTemplates[e[d]]}},bind:function(d,e){var f=null;null==d&&c(7007);b.isArray(d)?f=d:(f=b(d),0===
f.length&&c(7007),f=f.toArray());(null==e||"object"!==typeof e||b.isArray(e)||k.core.data.isObservableArray(e))&&c(7009);return Za.createBinding(f,e)}});var i=new z;i.createView=function(){return new z};b(function(){b('script[type="text/ejs"]').each(function(){var c=b.trim(this.id),e=b.trim(this.innerHTML);0!==e.length&&c&&(e=new EJS.Compiler(e,o),e.compile(),i.__cachedTemplates[c]=e.process)})});k.u.obj.expose("h5.core",{view:i})})();(function(){function c(a){var d={},e;for(e in C){var f=b("<div></div>").addClass(a).addClass(e).appendTo("body"),
i=b.camelCase(e);d[i]={};b.map(C[e],function(a){d[i][a]="width"===a||"height"===a?parseInt(f.css(a).replace(/\D/g,""),10):f.css(a)});f.remove()}return d}function z(a,b){var c=window.document.createElement("v:"+a),d;for(d in b)c.style[d]=b[d];return c}function o(a,b){for(var c=[],d=a/2,e=0.8*a/2,f=360/b*Math.PI/180,i=1;i<=b;i++){var j=f*i,h=Math.cos(j),j=Math.sin(j);c.push({from:{x:d+e/2*h,y:d+e/2*j},to:{x:d+e*h,y:d+e*j}})}return c}function s(a){return function(){var b=document.body,c=document.documentElement,
d=M?b:R?c:null;return d?"Height"===a?d["client"+a]>d["scroll"+a]?d["client"+a]:d["scroll"+a]:d["client"+a]:Math.max(b["scroll"+a],c["scroll"+a],b["offset"+a],c["offset"+a],c["client"+a])}}function l(a){return function(){var b=M?document.body:document.documentElement;return window["page"+("Top"===a?"Y":"X")+"Offset"]||b["scroll"+a]}}function G(a){var b=M?document.body:document.documentElement;return v.isiOS?window["inner"+a]:b["client"+a]}function E(a){var c=b(a)[0],d=document.body,e=b("html")[0],
a={top:0,left:0};if(c===d&&R)return{top:parseFloat(e.currentStyle.paddingTop||0)+parseFloat(d.currentStyle.marginTop||0)+parseFloat(d.currentStyle.borderTop||0),left:parseFloat(e.currentStyle.paddingLeft||0)+parseFloat(d.currentStyle.marginLeft||0)+parseFloat(d.currentStyle.borderLeft||0)};"undefined"!==typeof c.getBoundingClientRect&&(a=c.getBoundingClientRect());d=M?d:document.documentElement;c=d.clientTop||0;d=d.clientLeft||0;return{top:a.top+S()-c,left:a.left+T()-d}}function D(){b.each(H(arguments),
function(a,b){b.bind("click dblclick touchstart touchmove touchend mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave focus focusin focusout blur change select",function(){return!1})})}function h(a){a=K(a)?a[0]:a;return a===window||a===document||a===document.body}function A(a){this.style=b.extend(!0,{},a);a=this.style.throbber.width;this.group=z("group",{width:a+"px",height:this.style.throbber.height+"px"});this.group.className=J;for(var a=o(a,this.style.throbber.lines),d=this.style.throbberLine.color,
c=this.style.throbberLine.width,e=0,f=a.length;e<f;e++){var i=a[e],j=i.from,h=i.to,i=z("line");i.strokeweight=c;i.strokecolor=d;i.fillcolor=d;i.from=j.x+","+j.y;i.to=h.x+","+h.y;j=z("stroke");j.opacity=1;i.appendChild(j);this.group.appendChild(i)}this._createPercentArea()}function e(e,j){var l=this,q=b(e),o=b.extend(!0,{},{message:"",percent:-1,block:!0,fadeIn:-1,fadeOut:-1,promises:null,theme:"a"},j);this._displayed=!1;this._throbbers=[];this._settings=o;this._styles=b.extend(!0,{},{throbber:{roundTime:1E3,
lines:12},throbberLine:{},percent:{}},c(o.theme));this._$target=(this._isScreenLock=h(q))?b("body"):q;this._target=1===this._$target.length?this._$target[0]:this._$target.toArray();this._scrollEventTimerId=null;this._scrollHandler=function(){l._handleScrollEvent()};this._resizeEventTimerId=null;this._resizeHandler=function(){l._handleResizeEvent()};this._redrawable=!0;this._lastPercent=-1;this._lastMessage=null;this._fadeInTime="number"===typeof o.fadeIn?o.fadeIn:-1;this._fadeOutTime="number"===typeof o.fadeOut?
o.fadeOut:-1;this._$content=b();this._$overlay=b();this._$skin=b();for(var q=k.u.str.format(a,""===o.message?'style="display: none;"':"",o.message),v="https"===document.location.protocol?"return:false":"about:blank",y=0,s=this._$target.length;y<s;y++)this._$content=this._$content.add(b("<div></div>").append(q).addClass(i).addClass(o.theme).addClass(d).hide()),this._$overlay=this._$overlay.add((o.block?b("<div></div>"):b()).addClass(i).addClass(o.theme).addClass(p).hide()),this._$skin=this._$skin.add((R||
M?b("<iframe></iframe>"):b()).attr("src",v).addClass(i).addClass(f).hide());var u=this._isScreenLock&&I?"fixed":"absolute";b.each([this._$overlay,this._$content],function(){this.css("position",u)});o=o.promises;q=function(){l.hide()};b.isArray(o)?(b.map(o,function(a){return a&&b.isFunction(a.promise)?a:null}),0<o.length&&ka(k.async.when(o),"pipe",[q,q])):o&&b.isFunction(o.promise)&&ka(o,"pipe",[q,q])}var i="h5-indicator",d="content",p="overlay",f="skin",J="vml-root",a='<span class="indicator-throbber"></span><span class="indicator-message" {0}>{1}</span>',
j=500,v=k.env.ua,K=k.u.obj.isJQueryObject,H=k.u.obj.argsToArray,C={throbber:["width","height"],"throbber-line":["width","color"]},F=!!document.createElement("canvas").getContext,u=function(){var a=document.createDocumentFragment().appendChild(document.createElement("div"));a.innerHTML='<v:line strokeweight="1"/>';a=a.firstChild;a.style.behavior="url(#default#VML)";return"number"===typeof a.strokeweight}(),M="CSS1Compat"!==document.compatMode,R=v.isIE&&6>=v.browserVersion,W=v.isChrome&&v.isDesktop,
I=!(v.isAndroidDefaultBrowser||v.isiOS&&5>v.browserVersion||R||M||v.isWindowsPhone),P=null,Q=null,ba=null,V=null,S=null,T=null,O=function(){var a=document.createDocumentFragment().appendChild(document.createElement("div")),d=["Webkit","Moz","O","ms","Khtml"],c=d.length;return function(e){e=b.camelCase(e);if(e in a.style)return!0;for(var e=e.charAt(0).toUpperCase()+e.slice(1),f=0;f<c;f++)if(d[f]+e in a.style)return!0;return!1}}(),Q=function(a){return function(){var b=document.body,d=document.documentElement;
return"number"===typeof window["inner"+a]?window["inner"+a]:M?b["client"+a]:d["client"+a]}}("Height"),ba=s("Height"),V=s("Width"),S=l("Top"),T=l("Left");if(!F&&u){document.namespaces.add("v","urn:schemas-microsoft-com:vml");var N=document.createElement("style");N.setAttribute("type","text/css");N.styleSheet.cssText="v\\:stroke,v\\:line,v\\:textbox { behavior:url(#default#VML); }";document.getElementsByTagName("head")[0].appendChild(N)}P=O("animationName");A.prototype={show:function(a){a&&(this.root=
a,this.highlightPos=1,this.hide(),this.root.appendChild(this.group),this._run())},hide:function(){this.root.innerHTML="";this._runId&&(clearTimeout(this._runId),this._runId=null)},_run:function(){for(var a=this.style.throbber.lines,b=this.style.throbber.roundTime,d=this.highlightPos,c=this.group.childNodes,e=0,f=c.length;e<f;e++){var i=c[e];if("textbox"!==i.nodeName){var j=e+1;i.firstChild.opacity=j==d?"1":j==d+1||j==d-1?"0.75":"0.4"}}d==a?d=0:d++;this.highlightPos=d;var h=this;this._runId=setTimeout(function(){h._run.call(h)},
Math.floor(b/a))},_createPercentArea:function(){var a=z("textbox"),d=b("<table><tr><td></td></tr></table>"),c=d.find("td");c.width(this.group.style.width);c.height(this.group.style.height);c.css("line-height",this.group.style.height);c.addClass("throbber-percent");a.appendChild(d[0]);this.group.appendChild(a)},setPercent:function(a){b(this.group).find(".throbber-percent").html(a)}};var X=function(a){this.style=b.extend(!0,{},a);this.canvas=document.createElement("canvas");this.baseDiv=document.createElement("div");
this.percentDiv=document.createElement("div");var a=this.canvas,d=this.baseDiv,c=this.percentDiv;a.width=this.style.throbber.width;a.height=this.style.throbber.height;a.style.display="block";a.style.position="absolute";d.style.width=this.style.throbber.width+"px";d.style.height=this.style.throbber.height+"px";d.appendChild(a);c.style.width=this.style.throbber.width+"px";c.style.height=this.style.throbber.height+"px";c.style.lineHeight=this.style.throbber.height+"px";c.className="throbber-percent";
d.appendChild(c);this.positions=o(a.width,this.style.throbber.lines)};X.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.baseDiv),this._run())},hide:function(){b(this.baseDiv).remove();this._runId&&(W?clearInterval(this._runId):clearTimeout(this._runId),this._runId=null)},_run:function(){var a=this.canvas,b=a.getContext("2d"),d=this.highlightPos,c=this.positions,e=this.style.throbberLine.color,f=this.style.throbberLine.width,i=this.style.throbber.lines,
j=this.style.throbber.roundTime;a.width=a.width;for(var h=0,k=c.length;h<k;h++){b.beginPath();b.strokeStyle=e;b.lineWidth=f;var l=h+1;b.globalAlpha=l==d?1:l==d+1||l==d-1?0.75:0.4;var p=c[h],l=p.from,p=p.to;b.moveTo(l.x,l.y);b.lineTo(p.x,p.y);b.stroke()}d==i?d=0:d++;this.highlightPos=d;if(W){var o=0;this._runId=setInterval(function(){o++;a.style.webkitTransform="rotate("+o+"deg)";360<=o&&(o-=360)},j/360)}else if(P)a.className="throbber-canvas";else{var v=this;this._runId=setTimeout(function(){v._run.call(v)},
Math.floor(j/i))}},setPercent:function(a){this.percentDiv.innerHTML=a}};e.prototype={show:function(){if(this._displayed||0<this._$target.children("."+i).length)return this;this._displayed=!0;for(var a=this,d=this._fadeInTime,c=function(){var d=b(window);a._isScreenLock&&(D(a._$overlay,a._$content),I||(d.bind("touchmove",a._scrollHandler),d.bind("scroll",a._scrollHandler)));d.bind("orientationchange",a._resizeHandler);d.bind("resize",a._resizeHandler)},e=0,f=this._$target.length;e<f;e++){var j=this._$target.eq(e),
h=this._$content.eq(e),k=this._$skin.eq(e),l=this._$overlay.eq(e);!this._isScreenLock&&"static"===j.css("position")&&(j.data("before-position",j.css("position")),j.data("before-zoom",j.css("zoom")),j.css({position:"relative",zoom:"1"}));var p=F?new X(this._styles):u?new A(this._styles):null;p&&(a._throbbers.push(p),a.percent(this._settings.percent),p.show(h.children(".indicator-throbber")[0]));j.append(k).append(l).append(h)}e=b().add(this._$skin).add(this._$content).add(this._$overlay);0>d?(e.show(),
c()):e.fadeIn(d,c);this._reposition();this._resizeOverlay();return this},_resizeOverlay:function(){var a,b;if(!this._isScreenLock||!I)for(var d=0,c=this._$target.length;d<c;d++){b=this._$target.eq(d);var e=this._$overlay.eq(d),f=this._$skin.eq(d);if(this._isScreenLock)a=V(),b=ba();else{var j=b[0];a=j.scrollWidth;b=j.scrollHeight;if(R)a=Math.max(a,j.clientWidth),b=Math.max(b,j.clientHeight);else if(v.isIE&&"function"===typeof getComputedStyle){var j=getComputedStyle(j,null),i=parseFloat(j.width)+parseFloat(j.paddingLeft)+
parseFloat(j.paddingRight);a+=i-parseInt(i)-1;j=parseFloat(j.height)+parseFloat(j.paddingTop)+parseFloat(j.paddingBottom);b+=j-parseInt(j)-1}}e.width(a).height(b);(R||M)&&f.width(a).height(b)}},_reposition:function(){for(var a=0,d=this._$target.length;a<d;a++){var c=this._$target.eq(a),e=this._$content.eq(a);if(this._isScreenLock){var f=Q();I?e.css("top",(f-e.outerHeight())/2+"px"):e.css("top",S()+f/2-e.outerHeight()/2+"px")}else e.css("top",c.scrollTop()+(c.innerHeight()-e.outerHeight())/2);var f=
e.innerWidth()-e.width(),j=0;e.children().each(function(){var a=b(this);if("none"===a.css("display"))return!0;j+=a.outerWidth(!0)});e.width(j+f);e.css("left",c.scrollLeft()+(c.innerWidth()-e.outerWidth())/2)}},hide:function(){if(!this._displayed)return this;this._displayed=!1;var a=this,d=this._fadeOutTime,c=b().add(this._$skin).add(this._$content).add(this._$overlay),e=function(){var d=b(window);c.remove();a._isScreenLock||a._$target.each(function(a,d){var c=b(d);c.css({position:c.data("before-position"),
zoom:c.data("before-zoom")});c.removeData("before-position").removeData("before-zoom")});d.unbind("touchmove",a._scrollHandler);d.unbind("scroll",a._scrollHandler);d.unbind("orientationchange",a._resizeHandler);d.unbind("resize",a._resizeHandler);a._resizeEventTimerId&&clearTimeout(a._resizeEventTimerId);a._scrollEventTimerId&&clearTimeout(a._scrollEventTimerId)};if(!P||W)for(var f=0,j=this._throbbers.length;f<j;f++)this._throbbers[f].hide();0>d?(c.hide(),e()):c.fadeOut(d,e);return this},percent:function(a){if("number"!==
typeof a||!(0<=a&&100>=a))return this;if(!this._redrawable)return this._lastPercent=a,this;for(var b=0,d=this._throbbers.length;b<d;b++)this._throbbers[b].setPercent(a);return this},message:function(a){if(!x(a))return this;if(!this._redrawable)return this._lastMessage=a,this;this._$content.children(".indicator-message").css("display","inline-block").text(a);this._reposition();return this},_handleScrollEvent:function(){this._scrollEventTimerId&&clearTimeout(this._scrollEventTimerId);if(this._redrawable){var a=
this;this._scrollEventTimerId=setTimeout(function(){a._reposition();a._scrollEventTimerId=null},50)}},_handleResizeEvent:function(){function a(){b._resizeOverlay();b._reposition();b._redrawable=!0;b.percent(b._lastPercent);b.message(b._lastMessage);b._resizeEventTimerId=null}var b=this;this._resizeEventTimerId&&clearTimeout(this._resizeEventTimerId);this._redrawable=!1;I||R||M?a():this._resizeEventTimerId=setTimeout(function(){a()},1E3)}};k.u.obj.expose("h5.ui",{indicator:function(a,b){return new e(a,
b)},isInView:function(a,d){var c,e,f,j,i=b(a);if(void 0===d)e=G("Height"),j=G("Width"),c=S(),f=T();else{j=b(d);if(0===j.find(i).length)return;f=E(j);c=f.top+parseInt(j.css("border-top-width"));f=f.left+parseInt(j.css("border-left-width"));e=j.innerHeight();j=j.innerWidth()}e=c+e;j=f+j;var h=E(i),k=h.top,h=h.left,l=k+i.outerHeight(),i=h+i.outerWidth();return(c<=k&&k<e||c<l&&l<=e)&&(f<=h&&h<j||f<i&&i<=j)},scrollToTop:function(){function a(){1===window.scrollY&&(d=0);0<d&&(window.scrollTo(0,1),d--,setTimeout(a,
j))}var d=3;window.scrollTo(0,1);1!==b(window).scrollTop&&setTimeout(a,j)}})})();(function(){function t(){var c=b.mobile.activePage,c=c&&c[0].id;return x(c)&&0<c.length?c:null}function z(){var b=t();null!==b&&(o.addCSS(b),o.bindController(b))}var o=null,s={},l={},G={},E={},D={},h=!1;k.u.obj.ns("h5.ui.jqm");k.ui.jqm.dataPrefix="h5";var A={__name:"JQMController",__ready:function(){var c=this;b(':jqmData(role="page"), :jqmData(role="dialog")').each(function(){c.loadScript(this.id)})},':jqmData(role="page"), :jqmData(role="dialog") pageinit':function(b){b=
b.event.target.id;this.loadScript(b);this.addCSS(b);this.bindController(b)},"{document} pageremove":function(b){var b=b.event.target.id,c=l[b],d=G[b];if(c){for(var h=0,f=c.length;h<f;h++)c[h].dispose();l[b]=[]}if(d){h=0;for(f=d.length;h<f;h++)d[h].dispose();G[b]=[]}},"{document} pagebeforeshow":function(b){var b=b.event.target.id,c=null;this.addCSS(b);for(c in l)for(var d=l[c],h=b===c,f=0,k=d.length;f<k;f++){var a=d[f];h?a.enableListeners():a.disableListeners()}for(c in G){d=G[c];h=b===c;f=0;for(k=
d.length;f<k;f++)a=d[f],h?a.enableListeners():a.disableListeners()}},"{document} pagehide":function(b){this.removeCSS(b.event.target.id)},"{rootElement} h5controllerbound":function(c){c=c.evArg;if(this!==c){var i=t();null===i||-1!==b.inArray(c,l[i])||(G[i]||(G[i]=[]),G[i].push(c))}},"{rootElement} h5controllerunbound":function(c){var i=c.evArg,c=t();null!==c&&(i=b.inArray(i,G[c]),-1!==i&&G[c].splice(i,1))},loadScript:function(c){var c=b("#"+c),i=b.trim(c.data(this.getDataAttribute("script")));if(0!==
i.length)return i=b.map(i.split(","),function(c){return b.trim(c)}),c=!0==c.data(this.getDataAttribute("async")),k.u.loadScript(i,{async:c})},getDataAttribute:function(b){var c=k.ui.jqm.dataPrefix;null==c&&(c="h5");return 0!==c.length?c+"-"+b:b},bindController:function(b){var c=s[b],d=E[b];if(c&&0!==c.length){l[b]||(l[b]=[]);for(var h=l[b],f=0,o=c.length;f<o;f++){for(var a=c[f],j=!1,v=0,t=h.length;v<t;v++){var z=h[v];if(z&&z.__name===a.__name){j=!0;break}}j||l[b].push(k.core.controller("#"+b,a,d[f]))}}},
addCSS:function(c){if(c=D[c])for(var i=document.getElementsByTagName("head")[0],d=i.getElementsByTagName("link"),h=d.length,f=0,k=c.length;f<k;f++){for(var a=b.mobile.path.parseUrl(c[f]).filename,j=!1,l=0;l<h;l++)if(b.mobile.path.parseUrl(d[l].href).filename===a){j=!0;break}j||(a=document.createElement("link"),a.type="text/css",a.rel="stylesheet",a.href=c[f],i.appendChild(a))}},removeCSS:function(c){var h=D[c];if(h&&(c=t(),null!==c)){var d=D[c];b("link").filter(function(){var c=b(this).attr("href");
return-1!==b.inArray(c,h)&&-1===b.inArray(c,d)}).remove()}}};k.u.obj.expose("h5.ui.jqm.manager",{init:function(){h||(h=!0,b(function(){o=Ya.controllerInternal("body",A,null,{managed:!1});z()}))},define:function(e,h,d,k){x(e)||c(12E3,"id");null!=h&&!x(h)&&!b.isArray(h)&&c(12E3,"cssSrc");null!=d&&((x(d)||b.isArray(d))&&c(12001),(!b.isPlainObject(d)||!("__name"in d))&&c(12E3,"controllerDefObject"),null!=k&&!b.isPlainObject(k)&&c(12E3,"initParam"));D[e]||(D[e]=[]);s[e]||(s[e]=[]);E[e]||(E[e]=[]);b.merge(D[e],
b.map(b.makeArray(h),function(c){return b.inArray(c,D[e])!==-1?null:c}));d&&-1===b.inArray(d,s[e])&&(s[e].push(d),E[e].push(k));null!==t()&&o?z():this.init()}})})();(function(){function t(){s||(s=navigator.geolocation);return s}function z(b,c){this.oblateness=b;this.semiMajorAxis=c}function o(){}var s=null,l=k.env.ua;z.prototype.getOblateness=function(){return this.oblateness};z.prototype.getSemiMajorAxis=function(){return this.semiMajorAxis};var x=new z(298.257222,6378137),E=new z(299.152813,6377397.155),
D=Math.PI/180;b.extend(o.prototype,{isSupported:l.isIE&&9<=l.browserVersion?!0:!!t(),getCurrentPosition:function(b){var c=k.async.deferred();t().getCurrentPosition(function(b){c.resolve(b)},function(b){c.reject(V(2002,null,b))},b);return c.promise()},watchPosition:function(b){function c(){}var e=k.async.deferred(),i=t().watchPosition(function(b){e.notify(b)},function(b){t().clearWatch(i);e.reject(V(2002,null,b))},b);c.prototype.unwatch=function(){t().clearWatch(i);e.resolve()};return e.promise(new c)},
getDistance:function(b,k,e,i,d){(!isFinite(b)||!isFinite(k)||!isFinite(e)||!isFinite(i))&&c(2E3);var l=d?d:x;l instanceof z||c(2001);var d=l.getSemiMajorAxis(),f=l.getOblateness(),b=b*D,k=k*D,e=e*D,l=i*D,i=(b+e)/2,f=Math.sqrt(2*f-1)/f,f=Math.pow(f,2),o=Math.sqrt(1-f*Math.pow(Math.sin(i),2)),f=d*(1-f)/Math.pow(o,3),d=d/o,k=k-l;return Math.sqrt(Math.pow(f*(b-e),2)+Math.pow(d*Math.cos(i)*k,2))},GS_GRS80:x,GS_BESSEL:E});k.u.obj.expose("h5.api",{geo:new o})})();(function(){function t(a){if(a){var b=a.deferred;
(ya(b)||za(b)||!a.result)&&c(i)}}function z(a,e,f){if(b.isPlainObject(a))for(var h in a){var i=b.trim(h).replace(/ +/g," ").split(" "),k=[];""===i[0]?c(p):1===i.length?(k.push(i[0]),k.push("="),k.push("?")):/^(<=|<|>=|>|=|!=|like)$/i.test(i[1])?3===i.length&&/^like$/i.test(i[1])?(k.push(i[0]),k.push(i[1]),k.push("?"),k.push("ESCAPE"),k.push('"'+i[2]+'"')):(k.push(i[0]),k.push(i[1]),k.push("?")):c(d);e.push(k.join(" "));f.push(a[h])}}function o(){}function s(){this._multiple=!1}function l(a){this._db=
a;this._df=f();this._tx=null;this._tasks=[];this._queue=[]}function G(a,c,d){this._statements=[];this._parameters=[];this._executor=a;this._tableName=c;this._columns=b.isArray(d)?d.join(", "):"*";this._orderBy=this._where=null}function E(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._values=c?I(c):[];this._df=f();this._multiple=!0}function D(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._values=c;this._where=null}function h(a,
b){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._where=null}function A(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._statements.push(b);this._parameters.push(c||[])}function e(a){this._db=a}var i=3E3,d=3003,p=3011,f=k.async.deferred,J=k.u.str.format;b.extend(s.prototype,{execute:function(){return this._executor.add(this)._execute(function(a){return a[0]})}});b.extend(l.prototype,{_runTransaction:function(){return null!=this._tx},_addTask:function(a){this._tasks.push({deferred:a,
result:null})},_setResult:function(a){this._getRecentTask().result=a},_getRecentTask:function(){return this._tasks[this._tasks.length-1]},add:function(a){a instanceof s||c(3009);var b=this._getRecentTask();(!b||b.result)&&this._queue.push(a);return this},_execute:function(a){function b(){if(0===e.length){var h=a(i);c._setResult.apply(c,[h]);d.notify(h,c)}else{for(var k=e.shift(),l=k._statements,o=k._parameters,p=f().resolve().promise(),h=[],s=0,t=l.length;s<t;s++)(function(a,b){p=p.then(function(){var d=
f();c._tx.executeSql(a,b,function(a,b){h.push(k._onComplete(b));d.resolve()});return d.promise()})})(l[s],o[s]);p.then(function(){i.push(k._multiple?h:h[0]);b()})}}var c=this,d=this._df,e=this._queue,i=[];try{t(this._getRecentTask());this._addTask(d);for(var h=0,k=e.length;h<k;h++)e[h]._buildStatementAndParameters();this._runTransaction()?b():this._db.transaction(function(a){c._tx=a;b()},function(a){c._tx=null;for(var b=c._tasks,d=b.length-1;0<=d;d--)b[d].deferred.reject(V(3010,["SQLDB ERROR(code="+
a.code+")",a.message],a))},function(){c._tx=null;for(var a=c._tasks,b=a.length-1;0<=b;b--){var d=a[b];d.deferred.resolve(d.result)}})}catch(l){d.reject(l)}this._df=f();return d.promise()},execute:function(){return this._execute(function(){})},promise:function(){return this._df.promise()}});G.prototype=new s;b.extend(G.prototype,{where:function(a){!b.isPlainObject(a)&&!x(a)&&c(3004,["Select","where"]);this._where=a;return this},orderBy:function(a){!b.isPlainObject(a)&&!x(a)&&c(3004,["Select","orderBy"]);
this._orderBy=I(a);return this},_buildStatementAndParameters:function(){var a="",c=this._where,a=J("SELECT {0} FROM {1}",this._columns,this._tableName);if(b.isPlainObject(c)){var d=[];z(c,d,this._parameters);a+=" WHERE "+d.join(" AND ")}else x(c)&&(a+=" WHERE "+c);b.isArray(this._orderBy)&&(a+=" ORDER BY "+this._orderBy.join(", "));this._statements.push([a]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rows}});E.prototype=new s;b.extend(E.prototype,{_buildStatementAndParameters:function(){var a=
this._values,c=this._statements,d=this._parameters;if(0===a.length)c.push(J("INSERT INTO {0} DEFAULT VALUES",this._tableName)),d.push([]);else for(var e=0,f=a.length;e<f;e++){var h=a[e];if(null==h)c.push(J("INSERT INTO {0} DEFAULT VALUES",this._tableName)),d.push([]);else if(b.isPlainObject(h)){var i=[],k=[],l=[],o;for(o in h)i.push("?"),k.push(o),l.push(h[o]);c.push(J("INSERT INTO {0} ({1}) VALUES ({2})",this._tableName,k.join(", "),i.join(", ")));d.push(l)}}},_onComplete:function(a){return a.insertId}});
D.prototype=new s;b.extend(D.prototype,{where:function(a){!b.isPlainObject(a)&&!x(a)&&c(3004,["Update","where"]);this._where=a;return this},_buildStatementAndParameters:function(){var a="",c=this._where,a=this._values,d=[],e;for(e in a)d.push(e+" = ?"),this._parameters.push(a[e]);a=J("UPDATE {0} SET {1}",this._tableName,d.join(", "));b.isPlainObject(c)?(e=[],z(c,e,this._parameters),a+=" WHERE "+e.join(" AND ")):x(c)&&(a+=" WHERE "+c);this._statements.push([a]);this._parameters=[this._parameters]},
_onComplete:function(a){return a.rowsAffected}});h.prototype=new s;b.extend(h.prototype,{where:function(a){!b.isPlainObject(a)&&!x(a)&&c(3004,["Del","where"]);this._where=a;return this},_buildStatementAndParameters:function(){var a="",c=this._where,a=J("DELETE FROM {0}",this._tableName);if(b.isPlainObject(c)){var d=[];z(c,d,this._parameters);a+=" WHERE "+d.join(" AND ")}else x(c)&&(a+=" WHERE "+c);this._statements.push([a]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}});
A.prototype=new s;b.extend(A.prototype,{_buildStatementAndParameters:function(){},_onComplete:function(a){return a}});b.extend(e.prototype,{select:function(a,d,e){x(a)||c(3001,"select");!b.isArray(d)&&"*"!==d&&c(3005,"select");return new G(this.transaction(e),a,d)},insert:function(a,d,e){x(a)||c(3001,"insert");null!=d&&!b.isArray(d)&&!b.isPlainObject(d)&&c(3006,"insert");return new E(this.transaction(e),a,d)},update:function(a,d,e){x(a)||c(3001,"update");b.isPlainObject(d)||c(3006,"update");return new D(this.transaction(e),
a,d)},del:function(a,b){x(a)||c(3001,"del");return new h(this.transaction(b),a)},sql:function(a,d,e){x(a)||c(3007,"sql");null!=d&&!b.isArray(d)&&c(3008,"sql");return new A(this.transaction(e),a,d)},transaction:function(a){void 0!=a&&!(a instanceof l)&&c(3002,"transaction");return a?a:new l(this._db)}});b.extend(o.prototype,{isSupported:!!window.openDatabase,open:function(a,b,c,d){if(this.isSupported)return a=openDatabase(a,b,c,d),new e(a)}});k.u.obj.expose("h5.api",{sqldb:new o})})();(function(){function c(b){this._storage=
b}b.extend(c.prototype,{getLength:function(){return this._storage.length},key:function(b){return this._storage.key(b)},getItem:function(b){b=this._storage.getItem(b);return null===b?null:k.u.obj.deserialize(b)},setItem:function(b,c){this._storage.setItem(b,k.u.obj.serialize(c))},removeItem:function(b){this._storage.removeItem(b)},clear:function(){this._storage.clear()},each:function(b){for(var c=this._storage,k=0,l=c.length;k<l;k++){var t=c.key(k);b(k,t,this.getItem(t))}}});k.u.obj.expose("h5.api.storage",
{isSupported:!!window.localStorage,local:new c(window.localStorage),session:new c(window.sessionStorage)})})()})(jQuery);